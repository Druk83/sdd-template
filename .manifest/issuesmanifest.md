# Issues Manifest (H2)

Политики и стандарты работы с Issues: создание, триаж, workflow, классификация и закрытие.

---

## issues.H3.1 Фиксируй проблемы с трассировкой до закрытия
Каждая проблема, баг, инцидент или вопрос должны иметь четкий путь от создания до закрытия.
**Почему важно:**
Без трассировки теряется контекст решений, непонятен статус работ, накапливаются открытые issues без прогресса.

---

## issues.H4.1 Обязательные поля Issue
**Минимум для валидного Issue:**
- Заголовок: "Что + где + эффект" (кратко)
- `type:*` label (обязателен)
- `priority:P*` label (обязателен)
- Описание/контекст: что произошло и где
**Дополнительно для type:bug и type:incident:**
- Expected vs Actual (обязательно)
- Шаги воспроизведения или четкий симптом + логи
- Окружение: версия, OS, сервис, конфиг, коммит/релиз
**Связи (если применимо):**
- Ссылки на PR/Task/лог/метрику/алёрт

---

## issues.H3.2 Создавай Issue только для неясных случаев
Не все проблемы требуют Issue. Создавай Issue если нужна координация, исследование или оценка.
**Почему важно:**
Избыток issues создает шум, затрудняет фокус на важных проблемах, тратит время команды.

---

## issues.H4.2 Когда создавать и не создавать Issue
**Создавай Issue если:**
- Требуется сбор информации / воспроизведение / RCA
- Есть влияние на пользователей/production (incident) или безопасность (security)
- Нужна координация между подсистемами/командами
- Нужна оценка/приоритезация перед постановкой задачи
- Нужно задокументировать решение/компромисс
**НЕ создавай Issue если:**
- Маленькое изменение с ясным решением без рисков → сразу Task/PR
- Личная заметка без ценности для команды → не в репозиторий

---

## issues.H3.3 Классифицируй каждый Issue по type, priority, severity
Каждый Issue должен иметь тип, приоритет и при необходимости уровень критичности.
**Почему важно:**
Классификация обеспечивает правильную маршрутизацию, приоритезацию и SLA реакции.

---

## issues.H4.3 Типы Issue
Используй labels формата `type:*`:
- `type:bug` - дефект в работе
- `type:incident` - проблема в production
- `type:security` - уязвимость/угроза
- `type:infra` - инфраструктурная проблема
- `type:doc` - проблема в документации
- `type:question` - вопрос требующий обсуждения
- `type:research` - спайк/исследование

---

## issues.H4.4 Уровни priority и severity
**Priority (когда делать) - labels `priority:*`:**
| Уровень | Значение |
|---------|----------|
| P0 | Критично, блокирует прод/релиз, немедленная реакция |
| P1 | Высокий, существенное влияние, ближайший спринт/релиз |
| P2 | Средний, планово |
| P3 | Низкий, когда будет время |
**Severity (насколько больно) - labels `severity:*`:**
| Уровень | Значение |
|---------|----------|
| S0 | Останов сервиса / потеря данных / компрометация |
| S1 | Значимая деградация / крупный функционал сломан |
| S2 | Частичная деградация / обходной путь есть |
| S3 | Косметика / неудобство |
**Примечание:** Если Severity не ясна - укажи только Priority, Severity уточни на triage.

---

## issues.H3.4 Отслеживай статус по workflow
Issue должен проходить четкий путь: создание → triage → реализация → PR → закрытие.
**Почему важно:**
Без workflow теряется контроль над прогрессом, issues висят в неопределенном состоянии.

---

## issues.H4.5 Статусы workflow
Используй labels формата `status:*`:
- `status:needs-info` - не хватает данных (ждем автора)
- `status:triaged` - разобрано, есть решение/план
- `status:ready` - готово к реализации (можно брать в работу)
- `status:in-progress` - есть исполнитель/ветка/PR
- `status:blocked` - есть блокер (указать)
- `status:done` - закрыто (указать причину закрытия)

---

## issues.H4.6 Workflow от создания до закрытия
**1. Создание:**
Автор выставляет `type:*`, `priority:*`, добавляет описание и базовые данные.
**2. Triage (triage-owner):**
- Подтверждает/исправляет `type`, `priority`, `severity`
- Ставит `status:triaged` или `status:needs-info`
- Фиксирует решение: делаем / не делаем / откладываем / нужно исследование
**3. Реализация:**
- Если нужна декомпозиция - создается Task: `.tasks/<TASK-ID>.md`
- Ссылка на Task добавляется в Issue
- Issue получает `status:in-progress`
**4. PR:**
- PR должен ссылаться на Issue: `Fixes #123` / `Closes #123`
**5. Закрытие:**
- Issue закрывается при merge/release, либо с причиной: `won't-fix`, `duplicate`, `cannot-reproduce`, `out-of-scope`
- Оставляется "Closing note": что сделано, в какой версии, как проверить

---

## issues.H3.5 Защищай sensitive данные в Issues
Никогда не публикуй секреты, credentials или PII без маскирования.
**Почему важно:**
Issues часто доступны широкой аудитории. Утечка секретов ведет к компрометации систем.

---

## issues.H4.7 Правила обработки секретов и PII
**Запрещено прикладывать в Issue:**
- Секреты (tokens/keys/passwords), приватные ключи
- Персональные данные/PII без маскирования
- Закрытые ссылки/дампы без доступа команды
**Для type:security:**
- По умолчанию используй приватную процедуру проекта (если определена)
- В публичном Issue - только минимальные сведения без деталей эксплуатации/PoC

---

## issues.H4.8 Шаблоны по типам Issue
**Шаблон BUG:**
```markdown
# <Коротко: что + где + эффект>

**Type:** `type:bug`
**Priority:** `priority:P2`
**Severity:** `severity:S2`
**Status:** `status:needs-info`

## Контекст
- Компонент/сервис: <...>
- Версия/коммит: <...>
- Окружение: <OS/DB/runtime>
- Частота: <always/sometimes>
- Impact: <кто/что страдает>

## Шаги воспроизведения
1. ...
2. ...

## Ожидаемое поведение
...

## Фактическое поведение
...

## Логи/скриншоты
<вставить/ссылка>

## Дополнительно
- Workaround: <есть/нет>
- Связанные задачи: `.tasks/<TASK-ID>.md`
- Связанные PR: <link>
```
**Шаблон INCIDENT:**
```markdown
# Инцидент: <симптом + сервис>

**Type:** `type:incident`
**Priority:** `priority:P0`
**Severity:** `severity:S0`
**Status:** `status:in-progress`

**Таймлайн**
- **Start:** <time>
- **Detect:** <time>
- **Mitigate:** <time>
- **Resolve:** <time>

**Impact**
- <пользователи/проценты/данные>

**Метрики/алёрты**
- <links>

**Причина (RCA)**
- <первичное/финальное>

**Действия**
- [ ] Mitigation
- [ ] Fix
- [ ] Prevention

**Связи**
- **Tasks:** `.tasks/<TASK-ID>.md`
- **PR:** <link>
- **Release:** <version>
```
**Шаблон SECURITY:**
```markdown
# Security: кратко без деталей эксплуатации

**Type:** `type:security`
**Priority:** `priority:P0`
**Severity:** `severity:S0`
**Status:** `status:triaged`

**Описание (без секретов/PoC)**
- ...

**Затронутые компоненты**
- ...

**План**
- [ ] Оценка
- [ ] Исправление
- [ ] Проверка/регрессия
```
**Шаблон QUESTION/RESEARCH:**
```markdown
# Вопрос / Исследование: тема

**Type:** `type:question` | `type:research`
**Priority:** `priority:P2`
**Status:** `status:triaged`

**Контекст**
- ...

**Вопрос(ы)**
- Q1: ...
- Q2: ...

**Гипотезы / варианты**
- Option A: ...
- Option B: ...

**Решение / итог**
(заполняется после обсуждения)
```

---

## issues.H4.9 Правила для агента
**При работе с Issues:**
- Не создавай Issue автоматически без понятного симптома + контекста, или шагов воспроизведения/логов, или явной команды пользователя
- Можешь подготовить текст Issue и чеклист, но не выполняй `git commit`/`push`
**При создании Task по Issue:**
- Укажи ссылку на Issue в `.tasks/<TASK-ID>.md`
- Добавь ссылку на Task в Issue
**Безопасность:**
- Маскируй секреты/PII во всех Issue
- Для type:security следуй приватной процедуре проекта

---

## issues.H4.10 Чеклист качества Issue
**Хороший Issue содержит:**
- [ ] Репродукция или логи
- [ ] Expected vs Actual (для bug/incident)
- [ ] Указан impact и priority
- [ ] Есть связи на Task/PR/метрики
**Плохой Issue:**
- "Сломалось, помогите" без контекста → `status:needs-info` с запросом данных
