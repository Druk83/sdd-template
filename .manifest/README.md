# Инструкция по написанию манифестов

Манифест — набор правил поведения в конкретной области (Docker, TDD, зависимости и т.д.).

**Аудитория:** разработчики и агенты. Манифест читается обеими сторонами как единый источник правил.

---

## 1) Манифест — это правила, не документация

**Правильно:** заголовок раздела = правило/инструкция
```markdown
## 1) Не устанавливай вслепую
## 2) Используй конкретные команды аудита
## 3) Реагируй на CRITICAL/HIGH
```

**Неправильно:** заголовок раздела = категория/тема
```markdown
## 1) Принципы работы с зависимостями
## 2) Команды проверки
## 3) Уровни критичности
```

---

## 2) Пиши императивно

Обращайся напрямую:
- "Не устанавливай..."
- "Проверь перед..."
- "Сообщи о проблеме..."
- "Дождись подтверждения..."

Избегай пассивных конструкций:
- ~~"Должно быть проверено..."~~
- ~~"Рекомендуется использовать..."~~

---

## 3) Структура раздела

```markdown
## N) Название-правило

Краткое пояснение когда/зачем (1-2 предложения).

**Что делать:**
- Конкретное действие 1
- Конкретное действие 2

**Справочная информация:** (если нужна)
| Колонка | Значение |
|---------|----------|
| ... | ... |

**Запрещено:** (если есть)
- Антипаттерн 1
- Антипаттерн 2
```

---

## 4) Таблицы — только для справки

Таблицы используй для:
- Команд по языкам/инструментам
- Уровней/статусов с действиями
- Соответствий (файл → lock-файл)

Таблицы НЕ заменяют правила — они дополняют их.

---

## 5) Без глубоких обоснований

**Правильно:**
```markdown
## 3) Реагируй на CRITICAL/HIGH

| Уровень | Действие |
|---------|----------|
| CRITICAL | Предупредить немедленно |
```

**Неправильно:**
```markdown
## 3) Уровни критичности CVE

CVE (Common Vulnerabilities and Exposures) — это стандарт идентификации
уязвимостей. CVSS (Common Vulnerability Scoring System) определяет...
[3 абзаца теории]
```

Читателю не нужна теория — нужны действия.

---

## 6) Чеклист самопроверки манифеста

- [ ] Каждый заголовок раздела — это правило/инструкция?
- [ ] Используется императив?
- [ ] Нет теоретических обоснований?
- [ ] Таблицы только для справки, не для правил?
- [ ] Понятно что делать в каждой ситуации?
- [ ] Есть раздел "Запрещено" где нужно?
- [ ] Применимо и для разработчика, и для агента?

---

## 7) Примеры хороших названий разделов

| Область | Хорошо | Плохо |
|---------|--------|-------|
| Зависимости | "Не устанавливай вслепую" | "Принципы установки" |
| Docker | "Не используй :latest" | "Версионирование образов" |
| TDD | "Сначала тест, потом код" | "Процесс TDD" |
| Git | "Не коммить секреты" | "Безопасность репозитория" |

---

## 8) Ограничение по объему

| Объем | Статус | Действие |
|-------|--------|----------|
| до 100 строк | Оптимально | — |
| 100-150 строк | Допустимо | — |
| 150-200 строк | Предупреждение | Проверить, можно ли сократить |
| 200+ строк | Превышение | Разделить на два манифеста |

**Если манифест превышает 200 строк:**
1. Сузить предметную область
2. Выделить подобласть в отдельный манифест
3. Убрать избыточные пояснения

**Примеры разделения:**
- `dockermanifest.md` → `dockerbuildmanifest.md` + `dockercomposemanifest.md`
- `securitymanifest.md` → `authmanifest.md` + `secretsmanifest.md`

**Именование:** `<область>manifest.md` — область слитно со словом manifest.

---

## 9) Автономность манифестов

Манифесты — **автономные** документы:
- НЕ зависят от `.requirements/`
- НЕ требуют контекста из других манифестов
- Читаются при работе с конкретной областью

Ссылки на внешние ресурсы допустимы только для справочников команд/инструментов.
