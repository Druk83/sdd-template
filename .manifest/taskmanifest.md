# Task Manifest (H2)

Политики и стандарты оформления задач в `.tasks/`: структура, машиночитаемость, трассировка и проверяемость.

---

## task.H3.1 Делай задачи машиночитаемыми и проверяемыми
Задачи должны поддаваться автоматическому сканированию, контролю готовности и трассировке.
**Почему важно:**
Без машиночитаемости невозможна автоматизация контроля, отчеты, трассировка требований.

---

## task.H4.1 Каталоги и идентификаторы
**Каталоги:**
- Все задачи: `.tasks/`
- Выполненные задачи: `.tasks/done/*.md`
- Проблемы/инциденты/дефекты: `.issues/*.md`
**Идентификаторы (TASK-ID):**
Формат (рекомендуемый, но главное - единообразный):
- Эпики/этапы: `A1`, `A2`, `B1`
- Подзадачи: `A1-01`, `A1-02`
- Техдолг: `TD-01`, `TD-02`
- Issues: `IS-01`, `IS-02`
**Правила:**
- TASK-ID уникален в репозитории
- Файл задачи: `.tasks/<TASK-ID>.md`
- Файл issue: `.issues/<IS-ID>.md`
- TASK-ID используется в PDD: `@todo #<TASK-ID>:<EST> ...`

---

## task.H3.2 Используй обязательную структуру
Каждая задача содержит обязательные секции в заданном порядке.
**Почему важно:**
Единая структура обеспечивает машиночитаемость, автоматические проверки, единообразие для команды.

---

## task.H4.2 Обязательные секции задачи
Каждая задача должна содержать (в порядке):
1. `NOTE (дата): ...` - опционально, для истории/важного контекста
2. `# <TASK-ID> — <Название>`
3. `Status: <draft|planned|in-progress|blocked|done|dropped>` - обязательно
4. `## Контекст`
5. `## Состав работ`
6. `## Ожидаемые артефакты`
7. `## Чек-лист готовности`
8. `## Тестирование`
9. `## Выполнение (PR/commit)` - обязательно, может быть пустым до выполнения
10. `## Открытые вопросы` - обязательно, может быть пустым
**Рекомендуемые секции (если применимо):**
- `## Входы и ссылки`
- `## Ограничения и допущения`
- `## Риски`
- `## Зависимости`
- `## План разбиения` (если задача крупная)

---

## task.H3.3 Обеспечь исполнимость и проверяемость
Задача должна быть готова к работе (Definition of Ready) и иметь четкие критерии завершения (Definition of Done).
**Почему важно:**
Без исполнимости задача не может быть взята в работу. Без проверяемости невозможно определить завершение.

---

## task.H4.3 Definition of Ready
Задача готова к работе если:
- Есть контекст (зачем)
- Есть состав работ (что сделать пошагово)
- Есть артефакты (что должно появиться в репозитории)
- Есть чек-лист готовности (как понять что сделано)
- Есть тестирование (как проверить)
- Есть ссылки на входы (требования/сценарии/стек), если в `docs/**` существуют релевантные документы
- Не дублируется полное содержимое спецификаций или других задач - вместо копирования указываются явные ссылки на `docs/**` или `.tasks/<TASK-ID>.md`

---

## task.H4.4 Definition of Done
Задача закрыта (`Status: done`) если:
- Все пункты чек-листа либо отмечены `[x]`, либо осознанно вынесены в новую задачу
- Артефакты созданы и доступны по путям в репозитории
- Тестирование выполнено/описано так чтобы другой человек мог повторить
- Секция `## Выполнение (PR/commit)` заполнена ссылкой на PR и/или commit (если в проекте используется PR/код-ревью процесс)

---

## task.H4.5 Размер задачи
**Норма:** 0.5-3 рабочих дня
**Если больше:**
- Разбить на подзадачи (`A1-01`, `A1-02`)
- Оставить в текущей задаче раздел "План разбиения"
- PDD `@todo` рекомендуется привязывать к подзадачам, а в эпике оставлять только ссылки/обзор

---

## task.H3.4 Указывай ссылки на требования и сценарии
Задачи должны быть трассируемы к требованиям, сценариям и элементам стека.
**Почему важно:**
Без трассировки непонятно зачем задача, невозможно проверить полноту реализации требований.

---

## task.H4.6 Источники для трассировки
Если в проекте существуют соответствующие документы, укажи ссылки:
- Какие требования затрагиваются
- Какие сценарии/домен покрываются
- Какие компоненты/элементы стека затрагиваются
**Рекомендуемые источники фактов (docs):**
- Требования: `docs/requirements/требования/**`
- Сценарии: `docs/сценарии/**`
- Стек/структура: `docs/requirements/структураПО/стек проекта.md`
- Архитектура/диаграммы: `docs/requirements/архитектура/**`
**Методики/шаблоны (если нужно сослаться на правила процесса):**
- `.requirements/**`

---

## task.H4.7 Шаблон задачи
```md
NOTE (<YYYY-MM-DD>): <опц. — важный контекст/изменение репо/историческая справка>

# <TASK-ID> — <Короткое название результата>

Status: <draft|planned|in-progress|blocked|done|dropped>

## Контекст
<Зачем это нужно и что будет лучше после выполнения. 5-10 строк.>
<Если есть основания: ссылки на требования/сценарии/архитектуру (docs/**).>

## Входы и ссылки (рекомендуется)
- Стек: `docs/requirements/структураПО/стек проекта.md` (раздел <...>)
- Требования: `docs/requirements/требования/**` (раздел <...>)
- Сценарии: `docs/сценарии/**` (раздел <...>)
- Архитектура/диаграммы: `docs/requirements/архитектура/**`
- Методики/регламенты (если применимо): `.requirements/**`
- Связанные задачи: `.tasks/*.md`
- PDD @todo (если есть): `<paths/files>`

## Состав работ
1. **<Крупный шаг 1>.**
   - <подзадача/конкретика>
   - <файлы/папки которые затрагиваются>
   - <условия/ограничения>
2. **<Крупный шаг 2>.**
   - <...>

## Ожидаемые артефакты
- <Файлы/модули/скрипты/диаграммы которые должны появиться или измениться>
- <Пути в репозитории>
- <Контракты/схемы/спеки если применимо>

## Чек-лист готовности
- [ ] <критерий 1: проверяемый факт>
- [ ] <критерий 2: проверяемый факт>
- [ ] <документация обновлена: путь/раздел>
- [ ] <тесты проходят: команда/путь>
- [ ] <важные ограничения зафиксированы (если есть)>

## Тестирование
- **Unit:** <что тестируем и чем запускать>
- **Integration:** <сценарии/интеграции команды запуска>
- **E2E/Manual:** <ручная проверка шаги>
- **Non-functional (если нужно):** <perf/security/reliability проверки>

## Ограничения и допущения (опционально)
- <что считаем истинным что пока не делаем>

## Зависимости (опционально)
- **Depends on:** <TASK-ID / внешний фактор>
- **Blocks:** <TASK-ID>

## Риски (опционально)
- **R-01:** <риск> → <смягчение>

## Выполнение (PR/commit)
- PR: <ссылка или "—">
- Commit: <hash/ссылка или "—">
- Дата закрытия: <YYYY-MM-DD или "—">

## Открытые вопросы
- [ ] <вопрос 1>
- [ ] <вопрос 2>
```

---

## task.H4.8 Правила для агента
**Агент при создании задачи обязан:**
- Создавать файл `.tasks/<TASK-ID>.md` по шаблону
- Заполнять обязательные секции
- Вставлять ссылки на фактические входы в `docs/**` (требования/сценарии/стек) если они релевантны задаче
- При необходимости ссылаться на методики/регламенты в `.requirements/**` как на "правила выполнения"
- Формулировать чек-листы так чтобы их можно было проверить командой/фактом в репозитории
- Не делать commit/push (только предложить текст коммита/PR при необходимости)
**Агенту запрещено:**
- Придумывать несуществующие файлы/пути как "уже созданные"
- Отмечать `[x]` если нет явного факта выполнения
- Скрывать допущения - всё спорное фиксируется в `## Ограничения и допущения` и/или `## Открытые вопросы`

---

## task.H4.9 Чеклист проверки задачи
Перед принятием задачи проверь:
- [ ] Есть ли понятный результат (артефакты)?
- [ ] Можно ли проверить Done без "доверия на слово"?
- [ ] Есть ли ссылки на требования/сценарии/стек (если применимо и документы существуют в `docs/**`)?
- [ ] Нет ли расплывчатых формулировок (например "улучшить", "сделать нормально") без критериев?
- [ ] Не слишком ли большая задача (если да - разбить на подзадачи)?
- [ ] Заполнен ли `Status:` и есть ли секции `Выполнение` и `Открытые вопросы` (пусть даже пустые)?
