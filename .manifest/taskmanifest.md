# Манифест задач проекта (Task Manifest)

Этот документ задаёт **единый стандарт оформления задач** в каталоге `.tasks/`.
Стандарт рассчитан на людей и агентов: задачи должны быть **однозначно исполнимыми**, проверяемыми и трассируемыми к требованиям/сценариям/стеку.

> **Принцип источников:**
> - `docs/**` — **факты проекта и результаты этапов** (источник истины для трассировки).
> - `.requirements/**` — **методики/шаблоны/регламенты** (read-only), используются как правила, но не как “факты проекта”.

---

## 1) Делай задачи машиночитаемыми и проверяемыми

- Сделать задачи **машиночитаемыми и проверяемыми** (сканирование, отчёты, контроль готовности).
- Обеспечить трассировку: **сценарии → задачи → @todo (PDD) → PR/коммиты → артефакты**.
- Упростить разбиение работ: одна задача = один “законченный результат”.

---

## 2) Создавай задачи в .tasks/ с уникальным TASK-ID

### 2.1 Каталоги
- Все задачи: `.tasks/`
- Выполненные задачи: `.tasks/done/*.md`
- Проблемы/инциденты/дефекты проекта (если ведём в репо): `.issues/*.md`

### 2.2 Идентификаторы (TASK-ID)
Формат (рекомендуемый, но главное — единообразный по проекту):
- Эпики/этапы: `A1`, `A2`, `B1` …
- Подзадачи: `A1-01`, `A1-02` …
- Техдолг: `TD-01`, `TD-02` …
- Issues (если используется отдельный каталог): `IS-01`, `IS-02` …

**Правила:**
- `TASK-ID` уникален в репозитории.
- Файл задачи называется строго: `.tasks/<TASK-ID>.md`
- Для issues (если ведутся): файл называется строго: `.issues/<IS-ID>.md`
- `TASK-ID` используется в PDD: `@todo #<TASK-ID>:<EST> ...`

---

## 3) Используй обязательную структуру файла задачи

Каждая задача **должна** содержать секции ниже (в этом порядке).
Допускаются дополнительные секции, но обязательные — неизменны.

1. `NOTE (дата): ...` *(опционально, для “истории/важного контекста”)*
2. `# <TASK-ID> — <Название>`
3. `Status: <draft|planned|in-progress|blocked|done|dropped>` *(обязательно)*
4. `## Контекст`
5. `## Состав работ`
6. `## Ожидаемые артефакты`
7. `## Чек-лист готовности`
8. `## Тестирование`
9. `## Выполнение (PR/commit)` *(обязательно, может быть пустым до выполнения)*
10. `## Открытые вопросы` *(обязательно, может быть пустым)*

Рекомендуемые секции (если применимо):
- `## Входы и ссылки`
- `## Ограничения и допущения`
- `## Риски`
- `## Зависимости`
- `## План разбиения (если задача крупная)`

---

## 4) Обеспечь исполнимость и проверяемость задачи

### 4.1 Исполнимость (Definition of Ready)
Задача считается “готовой к работе”, если:
- есть **контекст** (зачем),
- есть **состав работ** (что сделать пошагово),
- есть **артефакты** (что должно появиться в репозитории),
- есть **чек-лист готовности** (как понять, что сделано),
- есть **тестирование** (как проверить),
- есть ссылки на входы (требования/сценарии/стек), **если в `docs/**` существуют релевантные документы**,
- **не дублируется** полное содержимое спецификаций или других задач — вместо копирования указываются явные ссылки на `docs/**` или `.tasks/<TASK-ID>.md`.

### 4.2 Проверяемость (Definition of Done)
Задача считается “закрытой” (`Status: done`), если:
- все пункты чек-листа либо отмечены `[x]`, либо осознанно вынесены в новую задачу,
- артефакты созданы и доступны по путям в репозитории,
- тестирование выполнено/описано так, чтобы другой человек мог повторить,
- секция `## Выполнение (PR/commit)` заполнена ссылкой(ами) на PR и/или commit *(если в проекте используется PR/код-ревью процесс)*.

### 4.3 Размер задачи
- Норма: **0.5–3 рабочих дня**.
- Если больше — **разбить на подзадачи** (`A1-01`, `A1-02` …) и оставить в текущей задаче раздел “План разбиения”.
- Если задача разбита — PDD `@todo` рекомендуется привязывать **к подзадачам**, а в эпике оставлять только ссылки/обзор.

---

## 5) Указывай ссылки на требования/сценарии/стек

Если в проекте существуют соответствующие документы, то в задаче должны быть ссылки:
- какие требования затрагиваются,
- какие сценарии/домен покрываются,
- какие компоненты/элементы стека затрагиваются.

**Рекомендуемые источники фактов (docs):**
- Требования: `docs/requirements/требования/**`
- Сценарии: `docs/сценарии/**`
- Стек/структура: `docs/requirements/структураПО/стек проекта.md`
- Архитектура/диаграммы (если ведутся): `docs/requirements/архитектура/**`

**Методики/шаблоны (если нужно сослаться на правила процесса):**
- `.requirements/**`

---

## 6) Правила для агента

Агент при создании задачи обязан:
- создавать файл `.tasks/<TASK-ID>.md` по шаблону,
- заполнять обязательные секции,
- вставлять ссылки на **фактические входы** в `docs/**` (требования/сценарии/стек), если они релевантны задаче,
- при необходимости ссылаться на методики/регламенты в `.requirements/**` как на “правила выполнения”,
- формулировать чек-листы так, чтобы их можно было проверить командой/фактом в репозитории,
- не делать commit/push (только предложить текст коммита/PR при необходимости).

Агенту запрещено:
- придумывать несуществующие файлы/пути как “уже созданные”,
- отмечать `[x]`, если нет явного факта выполнения,
- скрывать допущения — всё спорное фиксируется в `## Ограничения и допущения` и/или `## Открытые вопросы`.

---

## 7) Используй шаблон задачи

Ниже — эталонная заготовка.

```md
NOTE (<YYYY-MM-DD>): <опц. — важный контекст/изменение репо/историческая справка>

# <TASK-ID> — <Короткое название результата>

Status: <draft|planned|in-progress|blocked|done|dropped>

## Контекст
<Зачем это нужно и что будет лучше после выполнения. 5–10 строк.>
<Если есть основания: ссылки на требования/сценарии/архитектуру (docs/**).>

## Входы и ссылки (рекомендуется)
- Стек: `docs/requirements/структураПО/стек проекта.md` (раздел <...>)
- Требования: `docs/requirements/требования/**` (раздел <...>)
- Сценарии: `docs/сценарии/**` (раздел <...>)
- Архитектура/диаграммы: `docs/requirements/архитектура/**`
- Методики/регламенты (если применимо): `.requirements/**`
- Связанные задачи: `.tasks/*.md`
- PDD @todo (если есть): `<paths/files>`

## Состав работ
1. **<Крупный шаг 1>.**
   - <подзадача/конкретика>
   - <файлы/папки, которые затрагиваются>
   - <условия/ограничения>
2. **<Крупный шаг 2>.**
   - <...>
3. **<Крупный шаг 3>.**
   - <...>

## Ожидаемые артефакты
- <Файлы/модули/скрипты/диаграммы, которые должны появиться или измениться>
- <Пути в репозитории>
- <Контракты/схемы/спеки, если применимо>

## Чек-лист готовности
- [ ] <критерий 1: проверяемый факт>
- [ ] <критерий 2: проверяемый факт>
- [ ] <критерий 3: проверяемый факт>
- [ ] <документация обновлена: путь/раздел>
- [ ] <тесты проходят: команда/путь>
- [ ] <важные ограничения зафиксированы (если есть)>

## Тестирование
- **Unit:** <что тестируем и чем запускать>
- **Integration:** <сценарии/интеграции, команды запуска>
- **E2E/Manual:** <ручная проверка шаги>
- **Non-functional (если нужно):** <perf/security/reliability проверки>

## Ограничения и допущения (опционально)
- <что считаем истинным, что пока не делаем>

## Зависимости (опционально)
- **Depends on:** <TASK-ID / внешний фактор>
- **Blocks:** <TASK-ID>

## Риски (опционально)
- **R-01:** <риск> → <смягчение>
- **R-02:** <...>

## Выполнение (PR/commit)
- PR: <ссылка или "—">
- Commit: <hash/ссылка или "—">
- Дата закрытия: <YYYY-MM-DD или "—">

## Открытые вопросы
- [ ] <вопрос 1>
- [ ] <вопрос 2>
```

---

## 8) Проверь задачу перед принятием

Перед тем как принять задачу, проверьте:

* [ ] Есть ли понятный результат (артефакты)?
* [ ] Можно ли проверить Done без «доверия на слово»?
* [ ] Есть ли ссылки на требования/сценарии/стек (если применимо и документы существуют в `docs/**`)?
* [ ] Нет ли расплывчатых формулировок (например «улучшить», «сделать нормально») без критериев?
* [ ] Не слишком ли большая задача (если да — разбить на подзадачи)?
* [ ] Заполнен ли `Status:` и есть ли секции `Выполнение` и `Открытые вопросы` (пусть даже пустые)?
