# README Manifest (H2)

Политики и стандарты написания README: трехуровневая структура L0/L1/L2, недублирование, язык и шаблоны.

---

## readme.H3.1 Используй трехуровневую структуру L0/L1/L2
Репозиторий имеет три уровня README: корневой (L0), раздела (L1), инструмента (L2).
**Почему важно:**
Без уровней информация дублируется, README превращается в монолит, сложно найти детали конкретного инструмента.

---

## readme.H4.1 Определение уровней L0/L1/L2
**L0 — Root README:**
- Файл: `/README.md`
- Назначение: входная страница проекта (что это, как запустить, куда идти дальше)
**L1 — Section README:**
- Файл: `/<section>/README.md` (примеры: `.tools/README.md`, `services/README.md`)
- Назначение: индекс/оглавление раздела + локальные секционные сведения + каталог дочерних единиц
- ВАЖНО: L1 не является местом для правил "как писать README" - это задача манифеста
**L2 — Tool/Module README:**
- Файл: `/<section>/<tool>/README.md` (пример: `.tools/pdd/README.md`)
- Назначение: инструкция по конкретному инструменту/модулю (usage, опции, env, примеры, troubleshooting)

---

## readme.H3.2 Не дублируй информацию между уровнями
Детали живут на нижнем уровне, верхние уровни только ссылаются.
**Почему важно:**
Дублирование ведет к рассинхронизации. При изменении L2 забывают обновить L1, информация устаревает.

---

## readme.H4.2 Правила недублирования
**Где живут детали:**
- Детали использования (команды, опции, ENV, форматы входов/выходов, примеры) живут в L2
- Верхние уровни (L0/L1) только ссылаются на нижние, не пересказывают их
**Запрет дублирования:**
- L0 не дублирует L1/L2
- L1 не дублирует L2
- L2 не повторяет L0/L1, кроме 1 строки контекста + ссылок

---

## readme.H3.3 Создавай README от частного к общему
Сначала детали инструментов (L2), затем индекс раздела (L1), затем корневая страница (L0).
**Почему важно:**
Создание L1 до L2 ведет к пустым ссылкам или дублированию. Правильный порядок: детали → каталог → входная страница.

---

## readme.H4.3 Процесс создания от частного к общему
**Порядок действий:**
1. Сначала проверь/создай L2
   - Найди все `/<section>/*/README.md` (инструменты/модули)
   - Если L2 отсутствует - создай по шаблону (см. readme.H4.10)
2. Затем обнови L1 как индекс
   - L1 должен быть каталогом: 1-2 предложения о разделе + дерево папок + список инструментов (1 строка на инструмент + ссылка на L2)
3. Затем (при необходимости) обнови L0
   - L0 остается "входной страницей", без подробностей инструментария

---

## readme.H3.4 Не пиши правила оформления в README
Правила оформления живут в манифесте, не в самих README.
**Почему важно:**
Правила в README дублируются между файлами, устаревают, конфликтуют. Единый источник правил - манифест.

---

## readme.H4.4 Содержание L0 (Root README)
**Должен содержать:**
- 1-2 предложения: что за проект
- 3-7 bullets: ключевые возможности
- High-level архитектура (коротко)
- Минимальный Quickstart (dev)
- Ссылки на docs и ключевые разделы (L1)
**НЕ должен содержать:**
- Подробные туториалы
- Детальные описания инструментов/модулей
- Копии `docs/*` и L2

---

## readme.H4.5 Содержание L1 (Section README)
**Допустимые секции (рекомендуемый порядок):**
- `# Раздел <section>`
- `## Что находится в разделе` (1-2 предложения)
- `## Структура` (дерево папок)
- `## Инструменты` (каталог)
- `## Ссылки` (на L0, docs, манифест)
**Каталог: правило "1 строка на инструмент":**
Для каждого инструмента максимум:
- 1 строка "что делает" + ссылка на L2
- Опционально статус: `stable/experimental/deprecated`
Пример:
```markdown
- **pdd** — сканирует @todo и генерирует реестр задач → см. .tools/pdd/README.md (stable)
```
**Жесткий запрет секций в L1 (anti-duplication guard):**
Если агент видит эти секции в L1 - это ошибка, содержимое должно быть удалено/перенесено в L2:
- `Быстрый старт` / `Quickstart`
- `Использование` / `Usage`
- `Опции` / `Options`
- `Конфигурация` / `ENV`
- `Входы / Выходы` / `I/O`
- `Примеры` / `Examples`
- `Troubleshooting` / `FAQ`
- Любые командные блоки запуска конкретного инструмента
**Что разрешено в L1:**
- Что находится в разделе
- Структура папок
- Каталог инструментов/модулей (с ссылками на L2)
- Локальные операционные сведения, относящиеся к разделу как к папке (например: "все утилиты запускаются из корня", "общая точка входа скриптов")

---

## readme.H4.6 Содержание L2 (Tool/Module README)
**Должен содержать:**
- 1-2 предложения: назначение инструмента
- `## Быстрый старт`
- `## Опции` (если есть)
- `## Конфигурация / ENV` (если есть)
- `## Входы / Выходы` (если применимо)
- `## Примеры`
- `## Troubleshooting` (кратко)
- `## Ссылки` → `../README.md`
**НЕ должен содержать:**
- Описание всего раздела `<section>`
- Описание всего проекта
- Дублирование L0/L1, кроме контекста/ссылок

---

## readme.H3.5 Подтверждай команды источниками
Любая команда/опция/ENV в README должна быть подтверждена реальным источником.
**Почему важно:**
Документация без подтверждения устаревает, вводит в заблуждение, снижает доверие.

---

## readme.H4.7 Источники подтверждения команд/опций/ENV
**Допустимые источники:**
- `--help` CLI (или help/usage внутри скрипта)
- Исходный код инструмента
- `.env.example`, `config.*`
- `Makefile`, `package.json scripts`, `Cargo.toml`, `pyproject.toml`
**Если подтверждения нет:**
- Не перечисляй опции/ENV "предположительно"
- Допустимо написать: "См. `./<tool> --help` для актуальных опций"

---

## readme.H4.8 Язык и локализация
**По умолчанию:**
- Один файл: `README.md`
- Текст: RU
**RU+EN режим (в одном файле):**
Используй только если:
- Проект публичный/opensource, или
- Есть требование заказчика
**Формат RU+EN:**
- Сначала RU
- Затем EN в `<details>` (с тем же порядком секций)
```markdown
<details>
  <summary>EN version</summary>

... EN content (same section order) ...

</details>
```

---

## readme.H4.9 Вынос подробных гайдов в docs/
Подробные гайды и спецификации выноси в `docs/`:
- `docs/quickstart.md` - расширенный запуск/настройка
- `docs/architecture.md` - архитектура/диаграммы
- `docs/api.md` - API/контракты
- `docs/dev.md` - dev workflow, CI, тесты
- `docs/deploy.md` - деплой/операции

---

## readme.H4.10 Шаблоны L1 и L2
**Шаблон L1 (Section README):**
```markdown
# Раздел <section>

<1-2 предложения: что хранится в разделе и зачем>

## Структура

<section>/
  README.md
  <tool-1>/
    README.md

## Инструменты

* **<tool-1>** — <1 строка> -> см. `<section>/<tool-1>/README.md` (<status>)
* **<tool-2>** — <1 строка> -> см. `<section>/<tool-2>/README.md` (<status>)

## Ссылки

* В корень проекта: `/README.md`
* Документация: `docs/`
* Правила оформления README: `.manifest/readmemanifest.md`
```
**Шаблон L2 (Tool README):**
```markdown
# <tool> — <короткое назначение>

<1-2 предложения: что делает инструмент>

## Быстрый старт

<команда запуска из корня репозитория>

## Опции

* `<flag>` — <описание> (default: <...>)

## Конфигурация / ENV

* `<VAR>` — <описание> (default: <...>)

## Входы / Выходы

* Input: <...>
* Output: <...>

## Примеры

<пример>

## Troubleshooting

* <симптом> -> <решение>

## Ссылки

* Назад к разделу: `../README.md`
```

---

## readme.H4.11 Чеклист готовности README
README корректен если:
- [ ] L0/L1/L2 роли соблюдены
- [ ] L1 является индексом и не содержит "tool usage" секций
- [ ] Детали конкретных инструментов находятся в L2
- [ ] Нет копипаста между L1 и L2
- [ ] Команды/опции/ENV подтверждены источниками
- [ ] Ссылки не битые
