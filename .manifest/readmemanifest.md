# README Manifest

Регламент по написанию README в репозитории: **кратко, без дублирования, RU / RU+EN**.  
Документ **нормативный**: правила оформления README живут **здесь**, а не в README разделов/инструментов.

---

## 0) Определи уровень README (L0/L1/L2)

В репозитории допускаются три уровня README. Агент обязан классифицировать README по пути.

### L0 — Root README
- **Файл:** `/README.md`
- **Назначение:** входная страница проекта (что это, как запустить, куда идти дальше).

### L1 — Section README (README раздела)
- **Файл:** `/<section>/README.md`  
  Примеры: `.tools/README.md`, `services/README.md`, `docs/README.md`
- **Назначение:** **индекс/оглавление** раздела + **локальные** (секционные) сведения + каталог дочерних единиц.
- **Важно:** L1 **не является местом для правил “как писать README”** — это задача манифеста.

### L2 — Tool/Module README (README инструмента/модуля)
- **Файл:** `/<section>/<tool>/README.md`  
  Пример: `.tools/pdd/README.md`
- **Назначение:** инструкция по **конкретному** инструменту/модулю (usage, опции, env, примеры, troubleshooting).

---

## 1) Не дублируй информацию между уровнями

### 1.1 Где живут детали
- Детали использования (команды, опции, ENV, форматы входов/выходов, примеры) живут **в L2**.
- Верхние уровни (L0/L1) **только ссылаются** на нижние, а не пересказывают их.

### 1.2 Запрет дублирования по уровням
- L0 **не дублирует** L1/L2.
- L1 **не дублирует** L2.
- L2 **не повторяет** L0/L1, кроме 1 строки контекста + ссылок.

---

## 2) Создавай README от частного к общему (L2 → L1 → L0)

Если запрос звучит как:
> “проанализируй папку `<section>` и создай/обнови описание”

Агент обязан действовать **от частного к общему**:

1) **Сначала проверить/создать L2**
- Найти все `/<section>/*/README.md` (инструменты/модули).
- Если L2 отсутствует — создать L2 по шаблону (см. раздел 8).

2) **Затем обновить L1 как индекс**
- L1 должен быть **каталогом**: 1–2 предложения о разделе + дерево папок + список инструментов (1 строка на инструмент + ссылка на L2).

3) **Затем (при необходимости) обновить L0**
- L0 остаётся “входной страницей”, без подробностей инструментария.

---

## 3) Не пиши правила оформления в README

### 3.1 Где живут правила оформления README
- Все правила “как оформлять README”, “какие уровни существуют”, “что запрещено” — **только в этом манифесте**.

### 3.2 Что допустимо писать в L1
В L1 разрешены **только**:
- что находится в разделе;
- структура папок;
- каталог инструментов/модулей (с ссылками на L2);
- **локальные операционные сведения**, относящиеся к разделу как к папке (например: “все утилиты запускаются из корня”, “общая точка входа скриптов”, “общий формат registry.json”, если он действительно общий).

Уточнение: локальные сведения в L1 относятся **ко всему разделу**, а не к отдельным инструментам.

### 3.3 Что запрещено писать в L1
В L1 запрещено:
- повторять правила из манифеста (уровни L0/L1/L2, запреты на дублирование и т.п.);
- описывать “как писать README”;
- включать детали конкретных инструментов (это L2).

## Ссылки
* Правила оформления README: `.manifest/readme-manifest.md`

---

## 4) Соблюдай требования к содержанию по уровням

### 4.1 L0: `/README.md`
**Должен содержать:**
- 1–2 предложения: что за проект;
- 3–7 bullets: ключевые возможности;
- high-level архитектура (коротко);
- минимальный Quickstart (dev);
- ссылки на docs и на ключевые разделы (L1).

**Не должен содержать:**
- подробные туториалы;
- детальные описания инструментов/модулей;
- копии `docs/*` и L2.

---

### 4.2 L1: `/<section>/README.md` (индекс раздела)

#### Допустимые секции (рекомендуемый порядок)
- `# Раздел <section>`
- `## Что находится в разделе` (1–2 предложения)
- `## Структура` (дерево папок)
- `## Инструменты` (каталог)
- `## Ссылки` (на L0, docs, и манифест)

#### Каталог: правило “1 строка на инструмент”
Для каждого инструмента максимум:
- 1 строка “что делает” + ссылка на L2
- (опционально) статус: `stable/experimental/deprecated`

Пример:
- **pdd** — сканирует `@todo` и генерирует реестр задач → см. `.tools/pdd/README.md` (stable)

#### Жёсткий запрет по заголовкам (anti-duplication guard)
В L1 запрещены любые секции, характерные для L2. Если агент видит их в L1 — это ошибка, и содержимое должно быть удалено/перенесено в L2:

- `Быстрый старт` / `Quickstart`
- `Использование` / `Usage`
- `Опции` / `Options`
- `Конфигурация` / `ENV`
- `Входы / Выходы` / `I/O`
- `Примеры` / `Examples`
- `Troubleshooting` / `FAQ`
- любые командные блоки запуска конкретного инструмента

---

### 4.3 L2: `/<section>/<tool>/README.md`
**Должен содержать:**
- 1–2 предложения: назначение инструмента;
- `## Быстрый старт`
- `## Опции` (если есть)
- `## Конфигурация / ENV` (если есть)
- `## Входы / Выходы` (если применимо)
- `## Примеры`
- `## Troubleshooting` (кратко)
- `## Ссылки` → `../README.md`

**Не должен содержать:**
- описание всего раздела `<section>`;
- описание всего проекта;
- дублирование L0/L1, кроме контекста/ссылок.

---

## 5) Подтверждай команды/опции/ENV источниками

Любая команда/опция/ENV, указанная в README, должна быть подтверждена хотя бы одним источником:
- `--help` CLI (или help/usage внутри скрипта),
- исходный код инструмента,
- `.env.example`, `config.*`,
- `Makefile`, `package.json scripts`, `Cargo.toml`, `pyproject.toml` и т.п.

Если подтверждения нет:
- не перечислять опции/ENV “предположительно”;
- допустимо написать: “См. `./<tool> --help` для актуальных опций”.

---

## 6) Пиши на RU, добавляй EN в details при необходимости

### 6.1 По умолчанию
- Один файл: `README.md`
- Текст: **RU**

### 6.2 RU+EN режим (в одном файле)
Используется только если:
- проект публичный/opensource, или
- есть требование заказчика.

Формат:
- Сначала RU
- Затем EN в `<details>` (с тем же порядком секций)

```md
<details>
  <summary>EN version</summary>

... EN content (same section order) ...

</details>
```

---

## 7) Выноси подробные гайды в docs/

Подробные гайды и спецификации выносить в `docs/`:

* `docs/quickstart.md` — расширенный запуск/настройка
* `docs/architecture.md` — архитектура/диаграммы
* `docs/api.md` — API/контракты
* `docs/dev.md` — dev workflow, CI, тесты
* `docs/deploy.md` — деплой/операции

(точные имена могут отличаться, принцип обязателен)

---

## 8) Используй шаблоны

### 8.1 L1 шаблон (Section README)

```markdown
# Раздел <section>

<1-2 предложения: что хранится в разделе и зачем>

## Структура

<section>/
  README.md
  <tool-1>/
    README.md

## Инструменты

* **<tool-1>** — <1 строка> -> см. `<section>/<tool-1>/README.md` (<status>)
* **<tool-2>** — <1 строка> -> см. `<section>/<tool-2>/README.md` (<status>)

## Ссылки

* В корень проекта: `/README.md`
* Документация: `docs/`
* Правила оформления README: `.manifest/readme-manifest.md`
```

### 8.2 L2 шаблон (Tool README)

```markdown
# <tool> — <короткое назначение>

<1-2 предложения: что делает инструмент>

## Быстрый старт

<команда запуска из корня репозитория>

## Опции

* `<flag>` — <описание> (default: <...>)

## Конфигурация / ENV

* `<VAR>` — <описание> (default: <...>)

## Входы / Выходы

* Input: <...>
* Output: <...>

## Примеры

<пример>

## Troubleshooting

* <симптом> -> <решение>

## Ссылки

* Назад к разделу: `../README.md`
```

---

## 9) Проверь Definition of Done

README корректен, если:
- L0/L1/L2 роли соблюдены;
- L1 является индексом и не содержит “tool usage” секций;
- детали конкретных инструментов находятся в L2;
- нет копипаста между L1 и L2;
- команды/опции/ENV подтверждены источниками (см. раздел 5);
- ссылки не битые.
