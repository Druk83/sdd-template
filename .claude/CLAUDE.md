# Rules and Constraints for Claude Code (H0)

## ВАЖНЕЙШИЕ ВЗГЛЯДЫ (H1)

### H1.1. НИКОГДА не использовать эмодзи
**Запрещено использовать эмодзи в:**
- Коде (comments, переменные, строки)
- Файлах (Markdown, README, задачи)
- Сообщениях пользователю
- Git commit messages (если предлагаю текст)

### H1.2. Секреты и credentials
**Запрещено:**
- Хардкодить секреты, API ключи, пароли в коде
- Коммитить `.env` файлы с реальными значениями
- Логировать sensitive данные
**Используй:**
- Переменные окружения
- `.env.example` для плейсхолдеров
- `.gitignore` для исключения `.env`

### H1.3. ТОЛЬКО пользователь делает git commit/push
**Запрещено тебе:**
- Создавать коммиты (`git commit`)
- Делать push (`git push`)
- Создавать ветки (`git checkout -b`)
- Делать merge/rebase
- Изменять git историю
**Можешь:**
- Создавать и редактировать файлы
- Запускать `git status`, `git diff` для проверки
- Предлагать текст commit message (без эмодзи)
**Порядок работы:**
1. Создавай/редактируй файлы
2. Проверяй изменения: `git status`, `git diff`
3. Предлагай описание изменений
4. **Пользователь сам делает `git add`, `git commit`, `git push`**

### H1.4. Верификация релевантности контексту
**Запрещено:**
- Генерировать термины/примеры из обучающих данных
- Использовать примеры из других доменов (если не релевантны проекту)
- Заполнять placeholder'ы "типичными" примерами
**Используй:**
- Термины из входных источников (`.source/`, документация)
- Примеры из контекста текущего проекта
- При сомнении спрашивай разработчика
**Проверка:** можно ли проследить термин до источника в проекте?

## H1.5. Стиль общения
### Язык
- Отвечай на русском языке
- Используй код и технические термины на английском
- Называй файлы, переменные, функции на английском
### Тон
- Давай краткие и четкие ответы
- Используй технический язык без восторгов
- Сохраняй объективность вместо похвалы
- Предоставляй факты и решения, а не эмоции
- Не используй "Вы абсолютно правы" или подобные фразы
### Формат ответа
- Давай прямые ответы на вопросы
- Структурируй информацию (списки, таблицы)
- Оформляй примеры кода в блоках ```
- Не используй эмодзи

## H1.6. Файловые операции
### Создание файлов
- Создавай файлы только когда необходимо
- Предпочитай редактирование существующих файлов
- Не создавай .md файлы без явного запроса пользователя
- Используй абсолютные пути
### Комментарии к коду
- Пиши комментарии на русском языке (код на английском)
- Не используй эмодзи
- Будь кратким и по существу
- Комментируй только неочевидную логику
### Присвоение имен и документация
- Называй переменные, функции, классы на английском
- Пиши JSDoc/annotations для публичного API на английском
- Пиши JSDoc/annotations для внутреннего кода на русском
- Используй type annotations на английском (это часть кода)
- Называй файлы в kebab-case: `user-service.ts`, `auth-controller.ts`
- Называй ветки в формате type/description: `feature/add-auth`, `fix/login-bug`, `refactor/user-module`

## H1.7. Обработка ошибок
**При ошибках выполнения команд:**
- Сообщи пользователю о проблеме
- Предложи варианты решения
- Не повторяй упавшую команду без изменений
**При отсутствии файла/директории:**
- Проверь правильность пути
- Спроси пользователя о корректном расположении
- Не создавай файлы/директории без подтверждения
**При неоднозначности задачи:**
- Уточни требования у пользователя
- Не делай предположений о намерениях

## H1.8. Базовая проектная документация
Используй документацию проекта из:
- `.requirements/` - шаблоны и методики для написания документации (read-only)
- `docs/requirements/` - готовые документы технической документации, которые создает агент/разработчик
- `.tasks/` - текущие задачи и планирование
- `.issues/` - текущие проблемы и баги
- `.manifest/` - манифесты инструментов и процессов
- `README.md` - обзор проекта
**Соответствие шаблонов и результатов в docs/:**
| Шаблон (read-only) | Результат |
|--------------------|-----------|
| `.requirements/предметная область.md` | `docs/requirements/предметная область.md` |
| `.requirements/требования/*.md` | `docs/requirements/требования/*.md` |
| `.requirements/домены/*.md` | `docs/requirements/домены/*.md` |
| `.requirements/сценарии/*.md` | `docs/requirements/сценарии/<domain>/*.md` |
**При работе с задачами:**
- Читай `.requirements/` для понимания шаблонов
- Читай `docs/requirements/` для фактов проекта
- Проверяй `.tasks/` для актуальных задач
- Учитывай `.issues/` для известных проблем
- Следуй архитектурным решениям из документации

## H1.9. Структура проекта
Прочитай `.project-structure.json` в корне репо перед началом работы.
В нем:
- Иерархия основных директорий
- Назначение каждой папки
- Ключевые файлы по функциональности
Используй эту информацию для навигации по коду вместо вызова tools.
**Если файл отсутствует:**
- Спроси пользователя о структуре проекта
- Не пытайся угадывать структуру самостоятельно

## H1.10. Работа с манифестами
**Перед работой в любой области:**
Проверь наличие манифеста в `.manifest/<область>manifest.md` и изучи его.
**Приоритет при конфликте:**
1. Локальный манифест в директории компонента (`./<component>/manifest.md`)
2. Глобальный манифест (`.manifest/<название>manifest.md`)
3. Инструкции из этого файла (CLAUDE.md)

## H1.11 Применяй правильно иерархию в документах
Прочитай `.manifest\hierarchymanifest.md`в нем опредены политики иерархии документации в проекте