# Context Map — карта контекстов

Подход для визуализации ограниченных контекстов и их взаимосвязей.

## Назначение

Используй Context Map на этапах [5.3], [5.4] для определения границ контекстов и паттернов интеграции.

## Глоссарий

| Термин | Определение |
|--------|-------------|
| Bounded Context (BC) | Явная граница, внутри которой модель имеет определенное значение |
| Upstream (U) | Контекст-поставщик |
| Downstream (D) | Контекст-потребитель |
| Shared Kernel | Общая часть модели между контекстами |
| Anti-Corruption Layer | Слой трансляции между контекстами |
| Open Host Service | Публичный API контекста |
| Customer-Supplier | Отношение заказчик-поставщик |
| Conformist | Контекст, принимающий модель upstream без изменений |

## Процедура (императив)

### Фаза 1: Идентификация контекстов
1. Прочитай результаты этапа [4] и [5.1-5.2].
2. Определи границы каждого ограниченного контекста.
3. Для каждого BC запиши:
   - Название
   - Ответственность
   - Ключевые агрегаты

### Фаза 2: Определение связей
1. Найди все точки взаимодействия между контекстами.
2. Определи направление: кто поставщик (U), кто потребитель (D).
3. Выбери паттерн интеграции из глоссария.
4. Обоснуй выбор паттерна.

### Фаза 3: Создание диаграммы
1. Создай файл `context-map.plantuml`.
2. Изобрази каждый BC как компонент.
3. Добавь стрелки с указанием U/D.
4. Укажи паттерн интеграции на стрелке.
5. Сохрани в `docs/requirements/сценарии/<domain>/diagrams/`.

### Фаза 4: Документирование
1. Запиши описание каждого BC.
2. Добавь таблицу связей с паттернами.
3. Сохрани в `docs/requirements/сценарии/<domain>/ограниченные контексты.md`.

## Артефакты

| Артефакт | Расположение |
|----------|--------------|
| Диаграмма | `docs/requirements/сценарии/<domain>/diagrams/context-map.plantuml` |
| Описание | `docs/requirements/сценарии/<domain>/ограниченные контексты.md` |

## Критерии готовности

1. Проверь: все ограниченные контексты идентифицированы.
2. Проверь: границы контекстов явно определены.
3. Проверь: для каждой связи определен паттерн интеграции.
4. Проверь: диаграмма создана и соответствует описанию.
5. Проверь: направления U/D указаны корректно.

## Ссылки

* Назад к разделу: `../README.md`
* Шаблон [5.3]: `.requirements/сценарии/ограниченные контексты.md`
* Шаблон [5.4]: `.requirements/сценарии/диаграммы сценариев.md`
* Конвенции диаграмм: `.manifest/diagramsmanifest.md`
