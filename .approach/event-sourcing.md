# Event Sourcing — аудит изменений и восстановление состояния

Подход для фиксации изменений в виде событий и восстановления состояния.

## Назначение

Используй Event Sourcing на этапе [6] для аудита всех изменений и восстановления состояния.
Критерий выбора: требуется аудит всех изменений и восстановление состояния (см. 3.5.3).

## Глоссарий

| Термин | Определение |
|--------|-------------|
| Event store | Хранилище событий (event store) или audit log |
| Audit log | Журнал изменений |
| Domain Event | Факт, произошедший в домене (см. `.approach/event-storming.md`) |

## Процедура (императив)

### Фаза 1: Принятие решения
1. Проверь критерии в `docs/requirements/обоснование выбора.md`, раздел 3.5.3.
2. Зафиксируй решение "Event Sourcing: да/нет" и обоснование в разделе 3.5.3.

### Фаза 2: Перечень событий
1. Используй каталог мероприятий и результаты Event Storming.
2. Проверь, что события покрывают все изменения состояния домена.

### Фаза 3: Event store / audit log
1. Определи event store или audit log для хранения событий.
2. Запиши описание в `docs/requirements/структура Данных/описание БД.md`.

### Фаза 4: Восстановление состояния
1. Опиши порядок восстановления состояния из событий.
2. Зафиксируй описание в `docs/requirements/структура Данных/описание БД.md`.

## Артефакты

| Артефакт | Расположение |
|----------|--------------|
| Решение по Event Sourcing | `docs/requirements/обоснование выбора.md` (3.5.3) |
| Event store / audit log | `docs/requirements/структура Данных/описание БД.md` |
| Перечень событий | `docs/requirements/сценарии/<domain>/каталог мероприятий.md` |

## Критерии готовности

1. Решение по Event Sourcing зафиксировано в разделе 3.5.3.
2. Перечень событий согласован с результатами сценариев.
3. Event store / audit log описан в структуре данных.
4. Порядок восстановления состояния из событий зафиксирован.

## Ссылки

* Назад к разделу: `../README.md`
* Раздел 3.5.3: `.requirements/обоснование выбора.md`
* Event Storming: `.approach/event-storming.md`
* Шаблон [6]: `.requirements/структура Данных/описание БД.md`
