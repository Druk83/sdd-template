# Rules and Constraints for Copilot

## CRITICAL RULES

### 1. НИКОГДА не использовать эмодзи
**Запрещено использовать эмодзи в:**
- Коде (comments, переменные, строки)
- Файлах (Markdown, README, задачи)
- Сообщениях пользователю
- Git commit messages (если предлагаю текст)

### 2. ТОЛЬКО пользователь делает git commit/push
**Claude НЕ должен:**
- Создавать коммиты (`git commit`)
- Делать push (`git push`)
- Создавать ветки (`git checkout -b`)
- Делать merge/rebase
- Изменять git историю

**Claude может:**
- Создавать и редактировать файлы
- Запускать `git status`, `git diff` для проверки
- Предлагать текст commit message (без эмодзи)

**Workflow:**
1. Claude создает/редактирует файлы
2. Claude может проверить: `git status`, `git diff`
3. Claude предлагает описание изменений
4. **Пользователь сам делает `git add`, `git commit`, `git push`**

## Communication Style

### Tone
- Краткие и четкие ответы
- Технический язык без лишних восторгов
- Объективность вместо похвалы
- Факты и решения, а не эмоции
- Никогда не использовать "Вы абсолютно правы" или подобные фразы

### Response Format
- Прямые ответы на вопросы
- Структурированная информация (списки, таблицы)
- Примеры кода в блоках ```
- Без эмодзи

## File Operations

### Creating Files
- Создавать файлы только когда это необходимо
- Предпочитать редактирование существующих файлов
- Не создавать .md файлы без явного запроса пользователя
- Использовать абсолютные пути

### Code Comments
- Комментарии на русском языке (код на английском)
- Без эмодзи
- Краткие и по существу
- Только где логика неочевидна

## Base Project Documentation

Документация проекта находится в:
- `.requirements/` - требования и спецификации системы
- `.tasks/` - текущие задачи и планирование
- `.issues/` - текущие проблемы и баги
- `.manifest/` - папка с манифестами разных инструментов
- `README.md` - обзор проекта

**При работе с задачами:**
- Читать .requirements/ для понимания контекста
- Проверять .tasks/ для актуальных задач
- Учитывать .issues/ для известных проблем
- Следовать архитектурным решениям из документации

## Project Structure

Перед началом работы прочитай `.project-structure.json` в корне репо.
Он содержит:
- Иерархию основных директорий
- Назначение каждой папки
- Ключевые файлы по функциональност

Используй эту информацию для навигации по коду вместо вызова tools.

## Работа с Docker

Перед началом работы с ним, прочитай `./.manifest/dockermanifest.md` в корне репо.
Он содержит:
- правила проектирования Docker-конфигураций и чеклист при изменениях/релизах
- порядок поиска манифестов: `./<agent-dir>/dockermanifest.md` → `./.manifest/dockermanifest.md`
- короткие требования: разделение dev/prod, multi-stage, `.dockerignore`, отсутствие секретов в образах, фиксированные версии зависимостей

Используй этот манифест при проектировании, создании и изменении Docker-конфигураций.

## Работа с PDD

Перед началом работы прочитай `./.manifest/pddmanifest.md` в корне репо. Читай только при создании/изменении `@todo` пазлов.

Коротко:
- Формат: `@todo #TASK-ID:ESTIMATE Описание` — указывай `TASK-ID` из `./.tasks/`.
- При создании: привязывай к задаче в `./.tasks/`; при завершении — удаляй `@todo` или добавляй ссылку на PR/commit.
- Для поиска: `grep -r "@todo" .` или `npm run pdd` (если есть скрипт).

Используй манифест при оформлении, проверке и управлении `@todo`.

## Работа с TDD

Перед началом работы с тестами прочитай `./.manifest/tddmanifest.md` в корне репо. Читай только при работе с тестами или при изменении тестовой конфигурации.
Он содержит:
- краткие правила TDD: писать тесты первым где уместно, быстрые unit, стабильные integration/e2e, минимизировать флейки
- запуск и CI: `make test` (локально), `make test:ci` / pipeline в CI
- перед релизом: пройти полный набор тестов и устранить флейки

Используй этот манифест при проектировании и изменении тестов.

## Remember

1. Никогда не использовать эмодзи
2. Только пользователь делает git commit/push
3. Технический стиль без восторгов
4. Объективные факты вместо похвалы
5. Краткость и четкость
6. Использовать @todo для незавершенного кода (описание на русском)
7. Использовать TDD для написания тестов
8. Использовать PDD для оформления задач в ходе разработки
