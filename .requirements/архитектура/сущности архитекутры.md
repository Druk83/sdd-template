# Сущности архитектуры «<PROJECT_NAME>» (ArchiMate 3.2)

> **Важно:** этот файл в `.requirements/**` — **шаблон** (read-only).
> Заполненная версия хранится в: `docs/requirements/архитектура/сущности.md`.

---

## ПОРЯДОК СОЗДАНИЯ

### Зависимости (обязательные входы)

Этот документ создаётся **ПЕРВЫМ среди архитектурных документов (этап 7)**, но **ПОСЛЕ** завершения предыдущих этапов:

```
[5] Сценарии (docs/requirements/сценарии/**)     <- источник бизнес-событий, агрегатов
[6] Структура данных (docs/requirements/...)      <- источник data objects
[8] Стек проекта (docs/requirements/структура ПО/стек проекта.md) <- источник технологий
    ↓
[7] ЭТОТ ДОКУМЕНТ (docs/requirements/архитектура/сущности.md)
    ↓
docs/requirements/архитектура/описание BL.md
docs/requirements/архитектура/описание AL.md
docs/requirements/архитектура/описание TL.md
docs/requirements/архитектура/связи.md
```

**Если зависимости не созданы** — сначала выполни предыдущие этапы по `.requirements/трек разработки.md`.

---

Каталог сущностей содержит пронумерованные элементы для всех трёх слоёв.

### ID-схема (обязательная)

Каждая сущность получает типизированный ID по шаблону: `<PREFIX>-<NNN>`

**Business Layer:**
| Тип | Префикс | Пример |
|-----|---------|--------|
| Business Actor | `BA` | BA-001 |
| Business Role | `BR` | BR-001 |
| Business Collaboration | `BCL` | BCL-001 |
| Business Interface | `BIF` | BIF-001 |
| Business Process | `BP` | BP-001 |
| Business Function | `BF` | BF-001 |
| Business Interaction | `BX` | BX-001 |
| Business Event | `BE` | BE-001 |
| Business Service | `BS` | BS-001 |
| Business Object | `BO` | BO-001 |
| Contract | `CT` | CT-001 |
| Representation | `RP` | RP-001 |
| Product | `PR` | PR-001 |

**Application Layer:**
| Тип | Префикс | Пример |
|-----|---------|--------|
| Application Component | `AC` | AC-001 |
| Application Collaboration | `ACL` | ACL-001 |
| Application Interface | `AI` | AI-001 |
| Application Function | `AF` | AF-001 |
| Application Interaction | `AX` | AX-001 |
| Application Process | `AP` | AP-001 |
| Application Event | `AE` | AE-001 |
| Application Service | `AS` | AS-001 |
| Data Object | `DO` | DO-001 |

**Technology Layer:**
| Тип | Префикс | Пример |
|-----|---------|--------|
| Node | `TN` | TN-001 |
| Device | `TD` | TD-001 |
| System Software | `SW` | SW-001 |
| Technology Collaboration | `TCL` | TCL-001 |
| Technology Interface | `TIF` | TIF-001 |
| Technology Function | `TF` | TF-001 |
| Technology Process | `TP` | TP-001 |
| Technology Interaction | `TX` | TX-001 |
| Technology Event | `TE` | TE-001 |
| Technology Service | `TS` | TS-001 |
| Artifact | `AR` | AR-001 |
| Communication Network | `CN` | CN-001 |
| Path | `PT` | PT-001 |

**Важно:** **НЕ придумывай** сущности; извлекай их из стека/сценариев/требований. Если данных нет — фиксируй `Не определено` и создавай GAP в `docs/requirements/gap-tracking.md`.

ID используются в описаниях слоёв:
- `описание BL.md` — ссылается на BA-*, BR-*, BP-*, BO-*, ...
- `описание AL.md` — ссылается на AC-*, AI-*, AS-*, DO-*, ...
- `описание TL.md` — ссылается на TN-*, SW-*, TS-*, AR-*, ...

**Зависимые шаблоны (заполняются ПОСЛЕ этого документа):**
- `.requirements/архитектура/описание BL.md`
- `.requirements/архитектура/описание AL.md`
- `.requirements/архитектура/описание TL.md`
- `.requirements/архитектура/описание связи TL AL BL.md`

---

## Подсказка: сущности ArchiMate 3.2

**Бизнес-слой:** Business Actor, Business Role, Business Collaboration, Business Interface, Business Process, Business Function, Business Interaction, Business Event, Business Service, Business Object, Contract, Representation, Product.

**Прикладной слой:** Application Component, Application Collaboration, Application Interface, Application Function, Application Interaction, Application Process, Application Event, Application Service, Data Object.

**Технологический слой:** Node, Device, System Software, Technology Collaboration, Technology Interface, Technology Function, Technology Process, Technology Interaction, Technology Event, Technology Service, Artifact, Communication Network, Path.

**Связи:** Composition, Aggregation, Assignment, Realization, Specialization, Serving, Access, Influence, Association, Triggering, Flow.

---

## Обозначения

- Пометка `(опционально)` — элемент не обязателен для базового сквозного сценария и добавляется только если входит в текущий объём проекта.
- Квадратные скобки `[A + B]` — участники взаимодействия (A и B участвуют совместно, без направления).

**Стили связей в ArchiMate:**
- Serving: провайдер → потребитель (стрелки «вверх»: Technology → Application → Business)
- Used-by: потребитель → провайдер (стрелки «вниз»: Business → Application → Technology)
- Realization: более конкретное → более абстрактное (Artifact → Application Component; Data Object → Business Object)
- Deployment: Artifact → Node
- Triggering: причина → следствие (события/процессы)

Главное — консистентность и корректный тип связи.

---

<!--
Назначение: единый реестр архитектурных сущностей для построения ArchiMate-диаграмм
(Business/Application/Technology) и трассировки к требованиям/сценариям/стеку.

Источники фактов для заполнения:
- Стек: REQ:STACK (формат пути: `docs/requirements/структура ПО/стек проекта.md`) 
- Требования: `docs/requirements/требования/**`
- Сценарии: `docs/requirements/сценарии/**`

Правила:
1) Сущности должны покрывать сценарии (use cases) и требования (FR/NFR).
2) На каждую сущность: краткое назначение + обязательность (MUST/SHOULD/OPTIONAL) + ссылки на источники.
3) Нумерация сквозная внутри каждого слоя.
4) Опциональные сущности помечать *(опционально)*.
5) Application Component = сервис/модуль, Application Service = его публичная capability.
-->

## 0. Контекст
- **Проект:** `<PROJECT_NAME>`
- **Версия документа:** `<vX.Y>`
- **Дата:** `<YYYY-MM-DD>`
- **Ответственный:** `<team/person>`

### 0.1 Ссылки на источники (факты проекта)
- **Стек:** `docs/requirements/структура ПО/стек проекта.md` 
- **Требования:** `docs/requirements/требования/**`
- **Сценарии:** `docs/requirements/сценарии/**`

---

## 1. Карта покрытия (traceability)
> Коротко: какие сценарии и требования покрываем этим реестром.

- **SC-01:** `<scenario-name>` → `<ключевые BC/компоненты>`
- **SC-02:** `<scenario-name>` → `<...>`
- **FR/NFR (из требований):** `<IDs/кратко>` → `<сущности>`

---

# Бизнес-слой (Business Layer)

## Business Actor
> Реальные участники (люди/организации), взаимодействующие с системой.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BA-001 | `<ActorName>` | `<кто это>` | MUST |
| BA-002 | `<ActorName>` | `<...>` | SHOULD |
| BA-003 | `<ActorName>` | `<когда нужен>` | OPTIONAL |

## Business Role
> Роли в домене (обязанности/полномочия), не конкретные люди.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BR-001 | `<RoleName>` | `<ответственность>` | MUST |
| BR-002 | `<RoleName>` | `<...>` | SHOULD |

## Business Collaboration
> Совместная деятельность нескольких ролей/акторов для достижения результата.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| BCL-001 | `<CollaborationName>` | BR-001, BR-002 | `<что делают совместно>` | SHOULD |

## Business Interface
> Точки взаимодействия бизнеса с внешним миром (порталы, каналы связи).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BIF-001 | `<InterfaceName>` | `<назначение>` | MUST |
| BIF-002 | `<InterfaceName>` | `<...>` | OPTIONAL |

## Business Process
> Процессы с точки зрения бизнеса (цепочки действий и результатов).

| ID | Название | Результат | Статус |
|----|----------|-----------|--------|
| BP-001 | `<ProcessName>` | `<результат процесса>` | MUST |
| BP-002 | `<ProcessName>` | `<...>` | SHOULD |

## Business Function
> Функции — устойчивые способности бизнеса (набор процессов/задач).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BF-001 | `<FunctionName>` | `<что обеспечивает>` | MUST |
| BF-002 | `<FunctionName>` | `<...>` | SHOULD |

## Business Interaction
> Единичные взаимодействия между участниками.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| BX-001 | `<InteractionName>` | `[BR-001 + BR-002]` | `<что происходит>` | SHOULD |

## Business Event
> Бизнес-события (триггеры процессов, изменения состояния).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BE-001 | `<EventName>` | `<что произошло>` | MUST |
| BE-002 | `<EventName>` | `<...>` | SHOULD |

## Business Service
> Ценности, предоставляемые бизнесу/пользователю.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BS-001 | `<ServiceName>` | `<ценность>` | MUST |
| BS-002 | `<ServiceName>` | `<...>` | SHOULD |

## Business Object
> Доменные объекты/артефакты, понятные бизнесу.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| BO-001 | `<ObjectName>` | `<описание>` | MUST |
| BO-002 | `<ObjectName>` | `<...>` | SHOULD |

## Contract
> Договоры, соглашения, регулирующие взаимодействия.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| CT-001 | `<ContractName>` | `<назначение>` | SHOULD |
| CT-002 | `<ContractName>` | `<...>` | OPTIONAL |

## Representation
> Представления бизнес-объектов (документы, формы, отчёты).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| RP-001 | `<RepresentationName>` | `<формат/назначение>` | SHOULD |
| RP-002 | `<RepresentationName>` | `<...>` | OPTIONAL |

## Product
> Бизнес-продукты (наборы сервисов для клиентов).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| PR-001 | `<ProductName>` | `<описание>` | OPTIONAL |

---

# Прикладной слой (Application Layer)

## Application Component
> Исполняемые компоненты ПО: сервисы, модули, приложения, jobs, gateway, UI.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| AC-001 | `<ComponentName>` | `<назначение>` | MUST |
| AC-002 | `<ComponentName>` | `<...>` | SHOULD |

## Application Collaboration
> Совместная работа нескольких компонентов для выполнения задачи.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| ACL-001 | `<CollaborationName>` | AC-001, AC-002 | `<что делают совместно>` | SHOULD |

## Application Interface
> Внешние интерфейсы: API, UI, webhooks, очереди, CLI.

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| AI-001 | `<InterfaceName>` | REST API | `<назначение>` | MUST |
| AI-002 | `<InterfaceName>` | UI | `<...>` | SHOULD |

## Application Function
> Внутренние функции/capabilities компонентов.

| ID | Название | Компонент | Описание | Статус |
|----|----------|-----------|----------|--------|
| AF-001 | `<FunctionName>` | AC-001 | `<что делает>` | MUST |
| AF-002 | `<FunctionName>` | AC-002 | `<...>` | SHOULD |

## Application Interaction
> Единичные взаимодействия между компонентами.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| AX-001 | `<InteractionName>` | `[AC-001 + AC-002]` | `<что происходит>` | SHOULD |

## Application Process
> Прикладные процессы (последовательности операций).

| ID | Название | Результат | Статус |
|----|----------|-----------|--------|
| AP-001 | `<ProcessName>` | `<результат>` | MUST |
| AP-002 | `<ProcessName>` | `<...>` | SHOULD |

## Application Event
> Прикладные события (асинхронные сигналы между компонентами).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| AE-001 | `<EventName>` | `<что произошло>` | MUST |
| AE-002 | `<EventName>` | `<...>` | SHOULD |

## Application Service
> Публичные прикладные способности (capabilities), предоставляемые компонентами.

| ID | Название | Компонент | Описание | Статус |
|----|----------|-----------|----------|--------|
| AS-001 | `<ServiceName>` | AC-001 | `<что предоставляет>` | MUST |
| AS-002 | `<ServiceName>` | AC-002 | `<...>` | SHOULD |

## Data Object
> Прикладные структуры данных: DTO, события, проекции, записи.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| DO-001 | `<DataObjectName>` | `<описание>` | MUST |
| DO-002 | `<DataObjectName>` | `<...>` | SHOULD |

---

# Технологический слой (Technology Layer)

## Node
> Узлы размещения: VM/сервер/контейнер/кластер.

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| TN-001 | `<NodeName>` | container | `<назначение>` | MUST |
| TN-002 | `<NodeName>` | VM | `<...>` | SHOULD |

## Device
> Физические устройства (серверы, edge-устройства).

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| TD-001 | `<DeviceName>` | server | `<назначение>` | SHOULD |
| TD-002 | `<DeviceName>` | edge | `<...>` | OPTIONAL |

## System Software
> Платформы и системное ПО: OS, runtime, контейнеры, БД, брокеры.

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| SW-001 | `<SoftwareName>` | database | `<роль>` | MUST |
| SW-002 | `<SoftwareName>` | runtime | `<...>` | MUST |

## Technology Collaboration
> Совместная работа технологических компонентов.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| TCL-001 | `<CollaborationName>` | SW-001, SW-002 | `<что делают совместно>` | SHOULD |

## Technology Interface
> Технические интерфейсы: порты, протоколы, каналы связи.

| ID | Название | Протокол/Порт | Описание | Статус |
|----|----------|---------------|----------|--------|
| TIF-001 | `<InterfaceName>` | TCP/5432 | `<назначение>` | MUST |
| TIF-002 | `<InterfaceName>` | HTTP/8080 | `<...>` | SHOULD |

## Technology Function
> Технологические функции/capabilities платформы.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| TF-001 | `<FunctionName>` | `<что обеспечивает>` | MUST |
| TF-002 | `<FunctionName>` | `<...>` | SHOULD |

## Technology Process
> Технологические процессы эксплуатации: деплой, бэкапы, миграции.

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| TP-001 | `<ProcessName>` | `<что делаем>` | MUST |
| TP-002 | `<ProcessName>` | `<...>` | OPTIONAL |

## Technology Interaction
> Единичные взаимодействия между узлами/системами.

| ID | Название | Участники | Описание | Статус |
|----|----------|-----------|----------|--------|
| TX-001 | `<InteractionName>` | `[TN-001 + TN-002]` | `<что происходит>` | SHOULD |

## Technology Event
> Технологические события (инфраструктурные триггеры).

| ID | Название | Описание | Статус |
|----|----------|----------|--------|
| TE-001 | `<EventName>` | `<что произошло>` | SHOULD |
| TE-002 | `<EventName>` | `<...>` | OPTIONAL |

## Technology Service
> Технологические сервисы платформы: БД, брокер, мониторинг, CDN.

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| TS-001 | `<ServiceName>` | database | `<что предоставляет>` | MUST |
| TS-002 | `<ServiceName>` | monitoring | `<...>` | OPTIONAL |

## Artifact
> Артефакты: Docker-образы, пакеты, конфигурации, манифесты.

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| AR-001 | `<ArtifactName>` | docker-image | `<назначение>` | MUST |
| AR-002 | `<ArtifactName>` | config | `<...>` | SHOULD |

## Communication Network
> Сети связи (внешние, внутренние).

| ID | Название | Тип | Описание | Статус |
|----|----------|-----|----------|--------|
| CN-001 | `<NetworkName>` | internal | `<назначение>` | MUST |
| CN-002 | `<NetworkName>` | external | `<...>` | SHOULD |

## Path
> Пути/маршруты данных (endpoints, queues, topics).

| ID | Название | Протокол | Описание | Статус |
|----|----------|----------|----------|--------|
| PT-001 | `<PathName>` | AMQP | `<маршрут>` | SHOULD |
| PT-002 | `<PathName>` | HTTP | `<...>` | OPTIONAL |

---

# Bounded Context (опционально)

> Если проект использует DDD/микросервисы.

- **BC-01 `<BCName>`:** `<responsibility>` — владельцы данных: `<entities>`
- **BC-02 `<BCName>`:** `<...>`

---

## Примеры (H7)

**Считать верным:**
- Каждая сущность имеет ID и ссылку на источник `docs/**`.
- Нет вымышленных сущностей, только извлечённые из `docs/**`.

**Считать неверным:**
- Сущности без источников или с общими формулировками без контекста.

---

## Критерии готовности

- [ ] Все сущности имеют типизированные ID.
- [ ] Для каждой сущности указаны источники `docs/**`.
- [ ] Нет сущностей без обоснования или из "догадок".

### Gap Tracking
- [ ] `gap-tracking.md` ОБЯЗАТЕЛЬНО обновлен (пустая таблица = валидный результат превентивной проверки)
- [ ] Все пробелы зафиксированы с приоритетами (HIGH/MEDIUM/LOW)
