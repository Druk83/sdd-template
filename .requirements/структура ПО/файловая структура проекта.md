# Файловая структура проекта <PROJECT_NAME>

<!--
Назначение: описать репозиторий так, чтобы новый участник/агент быстро понял:
- где какой код, конфиги, документация и инфраструктура
- какие части системы обязательны, а какие опциональны
- как структура соответствует архитектуре (слои/BC/сервисы/модули)
- какие составы используются для разработки/CI/поставки (если отличаются)
Шаблон универсален: monolith/microservices, backend/frontend/cli, on-prem/cloud.
Источник истины для решений о составе и разбиении (фактические документы проекта):
- `docs/requirements/предметная область.md`
- `docs/requirements/обоснование выбора.md`
- `docs/requirements/требования/**` (если уже создано)
Правила:
- В дереве указывать только значимые каталоги и “якорные” файлы.
- Комментарии справа — 1 строка смысла.
- *(опц.)* ставить только там, где части реально может не быть.
- Если есть разные “составы” системы (Dev/CI/Release), описывать их профилями ниже.
-->

---

## 1. Общая структура репозитория (пример)

```text
<repo-root>/
├── README.md                         # Описание проекта: цель, quickstart, ссылки.
├── LICENSE                           # Лицензия (если применимо).
├── .gitignore                        # Игнорируемые файлы/каталоги.
├── .editorconfig                     # (опц.) Общие правила форматирования.
├── SECURITY.md                       # (опц.) Политика безопасности/репортинг.
├── CONTRIBUTING.md                   # (опц.) Правила контрибьюта.
├── CODEOWNERS                        # (опц.) Владельцы областей.
│
├── docs/                             # Документация проекта (публикуемые артефакты).
│   ├── requirements/                 # Фактические результаты этапов (source of truth).
│   │   ├── предметная область.md
│   │   ├── обоснование выбора.md
│   │   ├── требования/               # ГОСТ 19/34 и др.
│   │   ├── домены/                   # реестр + карточки доменов
│   │   └── сценарии/                 # сценарии по доменам
│   ├── file-structure.md             # Этот документ.
│   ├── tech-stack.md                 # Стек проекта (summary).
│   ├── architecture.md               # Архитектурный обзор (high level).
│   ├── adr/                          # Architecture Decision Records.
│   ├── api/                          # OpenAPI/AsyncAPI/Proto контракты.
│   ├── img/                          # Диаграммы/скриншоты.
│   └── legacy/                       # (опц.) Устаревшие документы/миграции структуры.
│
├── apps/                             # Приложения верхнего уровня (frontend, api, cli) (опц.).
│   ├── <app-frontend>/               # Веб/моб интерфейс.
│   ├── <app-api>/                    # API gateway / BFF.
│   └── <app-cli>/                    # CLI инструмент.
│
├── services/                         # Микросервисы/доменные сервисы (если несколько деплоев).
│   ├── <service-a>/                  # Сервис A: <responsibility>.
│   ├── <service-b>/                  # Сервис B: <responsibility>.
│   └── <service-c>/                  # Сервис C: <responsibility>.
│
├── packages/                         # Общие библиотеки/модули (опц.).
│   ├── <shared-lib>/                 # Общие утилиты/SDK/клиенты.
│   └── <contracts-lib>/              # DTO/схемы/контракты (если вынесены).
│
├── infra/                            # Инфраструктура и окружения.
│   ├── docker/                       # Dockerfiles/образы.
│   ├── compose/                      # docker-compose (dev/stage) (опц.).
│   ├── k8s/                          # Kubernetes manifests/Helm (опц.).
│   ├── terraform/                    # IaC (опц.).
│   ├── monitoring/                   # Prometheus/Grafana/Loki (опц.).
│   └── nginx/                        # Reverse-proxy конфиги (опц.).
│
├── scripts/                          # Скрипты автоматизации (devops/maintenance) (опц.).
│   ├── dev.sh                        # Запуск dev окружения.
│   ├── deploy.sh                     # Деплой.
│   ├── backup.sh                     # Бэкап.
│   └── doctor.sh                     # Диагностика окружения.
│
├── tests/                            # Тесты (общие или интеграционные).
│   ├── unit/                         # Юнит-тесты (если выделены отдельно).
│   ├── integration/                  # Интеграционные тесты.
│   ├── e2e/                          # E2E/UI (опц.).
│   ├── load/                         # Нагрузочные (k6/wrk) (опц.).
│   └── fixtures/                     # Моки/фикстуры.
│
├── tools/                            # Дев-тулы, генераторы, линтер-конфиги (опц.).
│   ├── linters/                      # Конфиги линтеров.
│   └── generators/                   # Генераторы кода/схем.
│
├── data/                             # Демо/мок-данные/семплы (опц.).
│   └── samples/
│
└── .github/                          # GitHub Actions / repository templates (или .gitlab/ и т.п.).
    ├── workflows/                    # CI/CD workflows
    └── ISSUE_TEMPLATE/               # Issue/PR templates
```

> Если репозиторий **не monorepo**, секции `apps/`, `services/`, `packages/` можно опустить и заменить на `src/`.

---

## 2. Стандартная структура компонента (приложение/сервис/пакет)

### 2.1 Шаблон каталога компонента (универсально)

```text
<component>/
├── README.md                         # Назначение компонента, входы/выходы, запуск.
├── CHANGELOG.md                      # (опц.) История изменений.
├── src/                              # Исходники.
├── configs/                          # (опц.) Конфиги компонента (dev/stage/prod).
├── migrations/                       # (опц.) Миграции БД.
├── contracts/                        # (опц.) DTO/events schemas.
├── public/                           # (опц.) Статика (для фронта).
├── tests/                            # (опц.) Тесты компонента.
├── Dockerfile                        # (опц.) Сборка контейнера.
└── <build-files>                     # package.json / Cargo.toml / go.mod / pom.xml и т.п.
```

### 2.2 Якорные файлы, которые стоит иметь

* `README.md` (обязательно)
* `configs/*.example` или `.env.example` (если есть env)
* `contracts/` (если есть интеграции/события)
* `Dockerfile` (если деплой в контейнере)
* `Makefile` или `taskfile.yml` *(опц.)* (удобство)

---

## 3. Логическая группировка

> Заполни под конкретный проект. Если чего-то нет — строку удали.

| Категория      | Путь             | Назначение                         | Технологии            | Обязательность |
| -------------- | ---------------- | ---------------------------------- | --------------------- | -------------- |
| Документация   | `docs/`          | Архитектура, ADR, схемы, контракты | Markdown/PlantUML/etc | must           |
| Приложения     | `apps/<...>`     | UI/API/CLI                         | <stack>               | <must/opt>     |
| Сервисы        | `services/<...>` | Доменные/инфра сервисы             | <stack>               | <must/opt>     |
| Общие пакеты   | `packages/<...>` | SDK/общие модули                   | <stack>               | opt            |
| Инфраструктура | `infra/`         | Compose/K8s/IaC/monitoring         | Docker/K8s/TF         | must           |
| Скрипты        | `scripts/`       | DevOps/утилиты                     | Bash/Python           | opt            |
| Тесты          | `tests/`         | integration/e2e/load               | <tools>               | must           |
| Данные         | `data/`          | семплы/фикстуры                    | JSON/CSV              | opt            |

---

## 4. Составы системы (Profiles / Distributions)

> Описывай только те профили, которые реально применяются в проекте.
> Выбери один профиль как “основной” и отметь его.

### 4.1 Profile A — Monolith (один деплой)

Типичный набор:

```text
docs/
src/
configs/
migrations/
tests/
infra/
README.md
```

### 4.2 Profile B — Modular Monolith (один деплой, много модулей)

```text
docs/
src/modules/
configs/
migrations/
tests/
infra/
README.md
```

### 4.3 Profile C — Microservices / DDD (несколько деплоев)

```text
docs/
apps/              # (опц.) gateway/BFF/frontend/cli
services/
packages/          # (опц.) contracts/SDK
infra/
tests/
README.md
```

### 4.4 Profile D — Monorepo Apps + Packages (несколько приложений)

```text
docs/
apps/
packages/
infra/
tests/
README.md
```

### 4.5 Profile E — Polyrepo (этот репозиторий часть системы)

```text
docs/
<current-repo-code>/
infra/
tests/
README.md
```

---

## 5. Соответствие архитектуре (слои / BC / сервисы)

> Привяжи структуру к архитектуре: “где какой слой/контекст”.
> Не смешивай понятия: **сервис** (отдельный деплой) ≠ **модуль** (часть одного деплоя).

### 5.1 По слоям (пример)

| Уровень / слой | Каталоги                                      | Описание                    |
| -------------- | --------------------------------------------- | --------------------------- |
| Presentation   | `apps/<frontend>`, `apps/<api>`               | UI и внешние API            |
| Application    | `apps/<api>`, `services/<orchestrator>`       | сценарии/оркестрация        |
| Domain         | `services/<domain-*>`, `packages/<domain>`    | доменная логика             |
| Data/Infra     | `infra/`, `services/<storage>`, `migrations/` | БД, брокеры, инфраструктура |

### 5.2 По bounded contexts (если event-driven)

| BC    | Каталоги/сервисы | События (см. docs/requirements/сценарии/*) |
| ----- | ---------------- | ------------------------------------------ |
| <BC1> | `services/<...>` | <EVT1, EVT2>                               |
| <BC2> | `services/<...>` | <EVT...>                                   |

---

## 6. Конвенции именования и размещения

* **Каталоги:** `<kebab-case>` (пример: `device-registry/`) или `<snake_case>` — выбрать одно.
* **Сервисы:** `services/<domain>-<capability>/` (пример: `orders-payment/`).
* **Документация:** `docs/<topic>.md`, доменные артефакты — `docs/requirements/**`, изображения — `docs/img/`.
* **Конфиги:** `configs/<env>.yaml|toml|json`, шаблоны — `.env.example`.
* **Секреты:** не хранить в repo; использовать <Vault/SOPS/env>.
* **Генерируемое:** `dist/`, `build/`, `target/`, `node_modules/` — в `.gitignore`.

---

## 7. Точки входа и как запустить

* **Dev запуск:** `<command>` (пример: `docker compose up -d`)
* **Тесты:** `<command>`
* **Сборка:** `<command>`
* **Локальная инфраструктура:** `infra/compose/<...>.yml`

---

## 8. Примечания (для агентов)

* Если проект **monolith**, то `services/` заменить на `src/` и добавить модульность в `src/modules/`.
* Если проект **polyrepo**, этот документ описывает только текущий репозиторий, а внешние — списком в конце.
* Если есть **контракты/события**, укажи источник истины: `docs/api/` или `packages/contracts/` или schema registry.

---

## 9. Приложение: шаблон “карточки каталога” *(опц.)*

### `services/<service-name>/`

* **Ответственность:** <...>
* **Входы:** <api/events/files>
* **Выходы:** <api/events/db>
* **Критичные конфиги:** <env vars / config files>
* **Владелец:** <team>

---

## Примеры (H7)

**Считать верным:**
- Структура отражает архитектурные слои и BC, пути консистентны.
- Указаны точки входа и команды запуска.

**Считать неверным:**
- Есть только список папок без пояснений и соответствия архитектуре.
- Нет правил именования и размещения артефактов.

---

## Критерии готовности

- [ ] Структура репозитория описана и сопоставлена с архитектурой
- [ ] Есть правила именования и размещения
- [ ] Указаны точки входа (dev/test/build) и локальная инфраструктура
