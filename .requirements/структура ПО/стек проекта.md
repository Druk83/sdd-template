# Технологический стек проекта <PROJECT_NAME>

<!--
> **Важно:** этот файл в `.requirements/**` — **шаблон/методика** (read-only).  
> Заполненная версия документа проекта хранится в: `docs/requirements/технологический стек.md` (write-only).

Назначение: единый документ по стеку, версиям, обоснованию выбора и эксплуатационным требованиям.
Шаблон рассчитан на “агентов”: заполняется последовательно, допускает частичное заполнение.
Правила:
- Для каждой технологии: компонент → технология → версия/диапазон → роль → обоснование → риски/альтернативы.
- Версии указывать как "min" + "рекомендуемая" + (опционально) "EOL/поддержка" (если известно).
- Всё, что влияет на воспроизводимость: lock-файлы, toolchain, контейнеры, CI. -->

## 0. Контекст
- **Проект / продукт:** <PROJECT_NAME>
- **Назначение:** <1-2 предложения: что делает система>
- **Тип системы:** <monolith/microservices/library/cli/mobile/web/embedded/ML/etc>
- **Целевая среда:** <cloud/on-prem/hybrid/edge>
- **Дата обновления:** <YYYY-MM-DD>
- **Ответственный:** <team/person>

### 0.1 Связанные документы (документы проекта)
- **Предметная область:** `docs/requirements/предметная область.md`
- **Обоснование выбора:** `docs/requirements/обоснование выбора.md`
- **Домены (реестр):** `docs/requirements/домены/реестр.md`
- **Домены (карточки):** `docs/requirements/домены/<domain_slug>.md`

### 0.2 Сценарии / Event Storming (документы проекта, если уже созданы)
> Ссылки ниже — на **фактические** сценарные артефакты.
> Если домена нет в `docs/requirements/домены/реестр.md`, сценарии для него не создаются.

- `docs/requirements/сценарии/<domain_slug>/карта процесса.md`
- `docs/requirements/сценарии/<domain_slug>/каталог мероприятий.md`
- `docs/requirements/сценарии/<domain_slug>/ограниченные контексты.md`

### 0.3 Методики и шаблоны (read-only)
- **Методика доменов:** `.requirements/домены/определение доменов.md`
- **Методика сценариев:** `.requirements/трек разработки.md` (Этап [5])
- **Шаблоны требований (если используются):** `.requirements/требования/**`

---

## 1. Обзор и критерии выбора

### 1.1 Ключевые требования (drivers)
- **Производительность:** <latency/throughput/limits>
- **Надёжность:** <SLA/SLO>
- **Безопасность:** <compliance/PII/secrets>
- **Масштабирование:** <vertical/horizontal>
- **Скорость разработки:** <constraints>
- **Экосистема/команда:** <skills/availability>

### 1.2 Принципы выбора технологий
- [+] <principle 1>
- [+] <principle 2>
- [-] <tradeoff 1>
- [-] <tradeoff 2>

---

## 2. Сводная таблица (TL;DR)
> Быстрый срез: “что используем и где”.

| Область | Компонент | Технология | Версия (min/rec) | Роль | Статус |
|---|---|---|---|---|---|
| Runtime | <...> | <...> | <...> | <...> | <planned/selected/legacy> |
| Backend | <...> | <...> | <...> | <...> | <...> |
| Frontend | <...> | <...> | <...> | <...> | <...> |
| Data | <...> | <...> | <...> | <...> | <...> |
| Messaging | <...> | <...> | <...> | <...> | <...> |
| Observability | <...> | <...> | <...> | <...> | <...> |
| DevOps | <...> | <...> | <...> | <...> | <...> |

---

## 3. Основной технологический стек

### 3.1 Язык(и) и версии
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Основной язык | <Language> | <min / rec> | <backend/core> | <why> |
| Доп. языки | <Language> | <min / rec> | <scripts/tools> | <why> |
| Toolchain/SDK | <tool> | <version> | <build/repro> | <why> |
| Стандарт/edition | <edition> | <year> | <lang mode> | <why> |

**Альтернативы и причина отказа:**
- <alt 1> — <reason>
- <alt 2> — <reason>

---

### 3.2 Backend / API
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Framework | <...> | <...> | <http api> | <...> |
| API стиль | <REST/GraphQL/gRPC> | <...> | <contracts> | <...> |
| AuthN/AuthZ | <JWT/OAuth2/RBAC/etc> | <...> | <security> | <...> |
| Async runtime / Concurrency | <...> | <...> | <io/parallel> | <...> |
| Serialization | <JSON/Protobuf/Avro> | <...> | <dto/events> | <...> |
| Validation | <...> | <...> | <input rules> | <...> |

**API контракты (где лежат):** `<openapi/asyncapi/proto path>`  
**Стратегия версионирования API:** <v1/v2, semver, deprecation>

---

### 3.3 Data Layer (хранилище данных)

#### 3.3.1 Основная БД
| Компонент | Технология | Версия (min/rec) | Обоснование | Примечания |
|---|---|---|---|---|
| Основная БД | <PostgreSQL/MySQL/MongoDB/etc> | <...> | <why> | <EOL/HA> |
| Драйвер/ORM | <...> | <...> | <type-safety/perf> | <...> |
| Миграции | <...> | <...> | <schema> | <...> |
| Пул соединений | <...> | <...> | <efficiency> | <...> |

#### 3.3.2 Кэширование
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Cache backend | <Redis/Memcached/etc> | <...> | <...> | <...> |
| Клиент | <...> | <...> | <...> | <...> |

#### 3.3.3 Файлы/объектное хранилище
| Компонент | Технология | Версия | Назначение | Примечания |
|---|---|---|---|---|
| Локальное | <FS> | - | <reports/temp> | <...> |
| S3-compatible | <S3/MinIO/etc> | <...> | <artifacts> | <...> |

---

### 3.4 Messaging / Eventing (опционально)
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Broker | <Kafka/RabbitMQ/NATS/etc> | <...> | <events/queues> | <...> |
| Schema registry | <...> | <...> | <contracts> | <...> |
| Формат событий | <JSON/Avro/Protobuf> | <...> | <...> | <...> |
| DLQ/Retry | <...> | <...> | <reliability> | <...> |

**Связанные документы (если созданы):**
- `docs/requirements/сценарии/<domain_slug>/каталог мероприятий.md`
- `docs/requirements/сценарии/<domain_slug>/ограниченные контексты.md`

---

### 3.5 Frontend (если есть)
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Язык | <TypeScript/etc> | <...> | <...> | <...> |
| Framework | <React/Vue/Angular/etc> | <...> | <...> | <...> |
| UI Kit | <MUI/Ant/etc> | <...> | <...> | <...> |
| State/Data | <Redux/Zustand/Query/etc> | <...> | <...> | <...> |
| Build tool | <Vite/Webpack/etc> | <...> | <...> | <...> |
| Auth | <...> | <...> | <...> | <...> |

**Коммуникация FE↔BE:** <REST/WebSocket/SSE/gRPC>  
**Кроссбраузер/платформы:** <targets>

---

### 3.6 CLI / Desktop / Mobile (опционально)
| Компонент | Технология | Версия | Назначение | Примечания |
|---|---|---|---|---|
| CLI framework | <...> | <...> | <commands> | <...> |
| Desktop | <...> | <...> | <...> | <...> |
| Mobile | <...> | <...> | <...> | <...> |

---

### 3.7 Observability (логирование, метрики, трейсинг)
| Компонент | Технология | Версия (min/rec) | Назначение | Обоснование |
|---|---|---|---|---|
| Логи | <...> | <...> | <structured logs> | <...> |
| Метрики | <Prometheus/etc> | <...> | <SLO> | <...> |
| Трейсинг | <OpenTelemetry/etc> | <...> | <distributed tracing> | <...> |
| Агрегация | <ELK/Loki/etc> | <...> | <central logs> | <...> |
| Алёртинг | <Alertmanager/etc> | <...> | <alerts> | <...> |

**Конвенции логов:** <JSON fields, correlationId>  
**SLO метрики:** <p95 latency, error rate, etc>

---

### 3.8 Security (опционально, но рекомендуется)
| Область | Технология/подход | Версия | Назначение | Примечания |
|---|---|---|---|---|
| Secrets | <Vault/SOPS/env> | <...> | <...> | <...> |
| SAST | <Semgrep/etc> | <...> | <...> | <...> |
| Dependency scanning | <Trivy/etc> | <...> | <...> | <...> |
| Auth | <OAuth2/JWT> | <...> | <...> | <...> |
| Audit | <...> | <...> | <...> | <...> |

---

### 3.9 Testing / QA
| Компонент | Технология | Версия | Назначение | Примечания |
|---|---|---|---|---|
| Unit tests | <...> | <...> | <...> | <...> |
| Integration tests | <...> | <...> | <...> | <...> |
| E2E tests | <...> | <...> | <...> | <...> |
| Load testing | <k6/JMeter/etc> | <...> | <...> | <...> |
| Contract tests | <...> | <...> | <API/events> | <...> |
| Benchmarks | <criterion/etc> | <...> | <perf> | <...> |

**Критерии приёмки:** <coverage %, latency budgets, etc>

---

## 4. Инструменты разработки (Developer Tooling)

### 4.1 Форматирование / линтеры
| Инструмент | Язык/область | Как запускается | Артефакты/выход |
|---|---|---|---|
| <formatter> | <...> | <cmd> | <exit/json> |
| <linter> | <...> | <cmd> | <sarif/json> |

### 4.2 Генерация и документация
| Инструмент | Назначение | Интеграция |
|---|---|---|
| <OpenAPI generator> | <...> | <CI> |
| <Docs site> | <...> | <...> |

---

## 5. DevOps / Build / Deployment

### 5.1 Сборка и воспроизводимость
- **Lock-файлы:** <Cargo.lock/package-lock/pnpm-lock/yarn.lock>
- **Версионирование:** <SemVer + tags>
- **Сборка:** <commands>
- **Артефакты:** <binaries/images/packages>

### 5.2 Контейнеризация
| Компонент | Технология | Версия | Назначение | Примечания |
|---|---|---|---|---|
| Container runtime | Docker/Podman | <...> | <...> | <...> |
| Compose | docker compose | <...> | dev env | <...> |
| Base images | <...> | <...> | <...> | <...> |

### 5.3 CI/CD
| Этап | Инструмент | Триггер | Выход |
|---|---|---|---|
| Lint | <...> | <push/pr> | <report> |
| Test | <...> | <...> | <coverage> |
| Build | <...> | <...> | <artifact> |
| Release | <...> | <...> | <versioned> |
| Deploy | <...> | <...> | <env> |

### 5.4 Среды (Environments)
- **dev:** <notes>
- **staging:** <notes>
- **prod:** <notes>

---

## 6. Структура репозитория (опционально)
```text
<repo>/
  docs/
    requirements/
      технологический стек.md
      архитектура/
      adr/
  src/
  tests/
  infra/
  .github/workflows/
```

---

## 7. Матрица совместимости (важно для агентов)

> Заполнить минимально: версия языка ↔ runtime ↔ ОС ↔ ключевые сервисы.

| Компонент |       Поддерживаемо | Минимум | Рекомендуемо | Примечания |
| --------- | ------------------: | ------: | -----------: | ---------- |
| OS        | <linux/windows/mac> |   <...> |        <...> | <...>      |
| Runtime   |  <node/jvm/rust/go> |   <...> |        <...> | <...>      |
| DB        |               <...> |   <...> |        <...> | <...>      |
| Broker    |               <...> |   <...> |        <...> | <...>      |

---

## 8. Риски, долги, альтернативы

### 8.1 Риски (Risk Register)

* **R-01:** <risk> → <mitigation>
* **R-02:** <...>

### 8.2 Альтернативы (почему не выбрали)

* **<Option A>:** <reason>
* **<Option B>:** <reason>

### 8.3 Техдолг по стеку

* [ ] <upgrade needed>
* [ ] <deprecations>
* [ ] <security patch plan>

---

## 9. Итог (1 экран)

**Стек:** <1-2 строки>
**Почему:** <1-2 строки>
**Что критично контролировать:**

* <compatibility>
* <security>
* <operability>
