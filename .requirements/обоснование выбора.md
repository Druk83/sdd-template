# Выбор направления исследований и обоснование выбора решений для <PROJECT_NAME>

> **Важно:** это **шаблон** (read-only) в `.requirements/**`.
> Заполненная версия документа ведётся в: `docs/requirements/обоснование выбора.md`.
> Результаты фиксируются только в `docs/**`, шаблоны не изменяем.

---

## 1. Связанные документы
- **Предметная область (документ проекта):** `docs/requirements/предметная область.md`
- **Требования (если уже созданы):**
  - `docs/requirements/требования/**`
- **Архитектура (если уже создана):** `docs/requirements/архитектура/архитектура.md`

---

## 2. Обоснование выбора направления (что и почему выбираем)
На этапе предварительного исследования, опираясь на предметную область, рассматриваются возможные варианты реализации ключевых аспектов системы: **платформа**, **архитектурный стиль**, **интеграции**, **хранилища**, **языки/стек**, **наблюдаемость/DevOps**.  
Цель — зафиксировать **рациональный выбор** (и его границы) на основании сравнения вариантов и ограничений из предметной области.

### 2.1 Критерии выбора (из предметной области)
| Критерий | Приоритет (H/M/L) | Как проверяем/подтверждаем | Примечание |
|---|---|---|---|
| Надёжность/доступность | <H/M/L> | <SLA/SLO, отказовые сценарии> | <...> |
| Производительность | <H/M/L> | <p95/p99, throughput> | <...> |
| Безопасность | <H/M/L> | <модель угроз, требования> | <...> |
| Интеграции/совместимость | <H/M/L> | <контракты, протоколы> | <...> |
| Эксплуатация | <H/M/L> | <мониторинг, алерты, runbooks> | <...> |
| Стоимость владения (TCO) | <H/M/L> | <infra+ops+лицензии> | <...> |
| Экспертиза команды | <H/M/L> | <skill matrix> | <...> |
| Масштабируемость | <H/M/L> | <горизонтальный рост/лимиты> | <...> |
| Вендор-локин | <H/M/L> | <портируемость/standards> | <...> |

---

## 3. Обоснование выбора платформы
### 3.1 Рассмотренные варианты
| Вариант | Плюсы | Минусы | Риски/ограничения | Итог |
|---|---|---|---|---|
| On-prem (VM/Bare metal) | <...> | <...> | <...> | <выбран/не выбран/отложено> |
| Cloud (IaaS/PaaS) | <...> | <...> | <...> | <...> |
| Hybrid | <...> | <...> | <...> | <...> |
| Edge/Embedded (если применимо) | <...> | <...> | <...> | <...> |

### 3.2 Принятое решение
**Выбрано:** <PLATFORM_DECISION>  
**Основные причины выбора:**
- <причина 1>
- <причина 2>
- <причина 3>

**Границы решения (что входит / что не входит):**
- Входит: <...>
- Не входит / отложено: <...>

---

## 4. Обоснование выбора архитектурного подхода

### 4.1 Масштаб системы

| Масштаб | Характеристики | Типичные решения |
|---------|----------------|------------------|
| **Малая** | 1-3 разработчика, 1 домен, < 10 UC, < 1000 RPS | Монолит, Layered, минимум документации |
| **Средняя** | 3-10 разработчиков, 2-5 доменов, 10-50 UC, 1K-10K RPS | Модульный монолит, DDD light, полная документация |
| **Крупная** | 10+ разработчиков, 5+ доменов, 50+ UC, 10K+ RPS | Микросервисы/EDA, DDD full, строгие контракты |

**Выбранный масштаб:** <малая/средняя/крупная>

**Обоснование:**
- Команда: <размер>
- Домены: <количество>
- Нагрузка: <ожидаемая>
- Срок жизни системы: <1-3 года / 3-5 лет / 5+ лет>

### 4.2 Драйверы архитектурного решения

> Оценить перед выбором стиля. Высокая оценка = сложность, требующая соответствующего решения.

| Драйвер | Оценка (L/M/H) | Описание ситуации | Влияние на выбор |
|---------|----------------|-------------------|------------------|
| **Разделение ответственности** | <L/M/H> | <сколько команд, независимость деплоя> | <монолит/модули/микросервисы> |
| **Масштабируемость** | <L/M/H> | <нагрузка, рост, горячие точки> | <горизонтальное/вертикальное> |
| **Отказоустойчивость** | <L/M/H> | <допустимый downtime, SLA> | <резервирование, graceful degradation> |
| **Доменная сложность** | <L/M/H> | <количество BC, инварианты, правила> | <DDD да/нет, глубина моделирования> |
| **Интенсивность взаимодействия** | <L/M/H> | <sync/async, частота, объем> | <API/Events/Hybrid> |

**Вывод по драйверам:**
- Если большинство L → простая архитектура (монолит, layered)
- Если M/H в "Разделение" и "Масштабируемость" → модульная/микросервисная
- Если H в "Доменная сложность" → DDD обязателен
- Если H в "Взаимодействие" → event-driven или hybrid

### 4.3 Рассмотренные варианты

> **Справочник:** https://github.com/Druk83/arch-patterns — детальное описание архитектурных стилей (при необходимости).

| Вариант | Когда подходит | Сильные стороны | Слабые стороны | Риски | Итог |
|---|---|---|---|---|---|
| Монолит | <...> | <...> | <...> | <...> | <...> |
| Модульная архитектура (слои/модули) | <...> | <...> | <...> | <...> | <...> |
| Микросервисы | <...> | <...> | <...> | <...> | <...> |
| Event-driven (EDA) | <...> | <...> | <...> | <...> | <...> |
| Serverless/Functions | <...> | <...> | <...> | <...> | <...> |

### 4.4 Принятое решение
**Выбрано:** <ARCH_DECISION>
**Почему:**
- <...>
- <...>

**Принципы и ограничения:**
- <например: единые контракты, изоляция модулей, запрет циклических зависимостей, границы контекстов и т.п.>

### 4.5 Методология моделирования и паттерны

**Методология моделирования:**
| Методология | Применяется | Где используется | Обоснование |
|-------------|-------------|------------------|-------------|
| DDD (Domain-Driven Design) | да/нет | домены, агрегаты, BC | <почему выбрана/отклонена> |
| Event Storming | да/нет | сценарии, события | <...> |
| CQRS | да/нет | разделение read/write | <...> |
| Event Sourcing | да/нет | хранение событий | <...> |

**Архитектурные паттерны (уровень приложения):**
| Паттерн | Применяется | Где используется | Обоснование |
|---------|-------------|------------------|-------------|
| Layered (N-tier) | да/нет | структура модулей | <...> |
| Hexagonal (Ports & Adapters) | да/нет | изоляция домена | <...> |
| Clean Architecture | да/нет | зависимости внутрь | <...> |
| MVC/MVP/MVVM | да/нет | UI слой | <...> |

**Паттерны проектирования (уровень кода):**
| Паттерн | Где применяется | Назначение |
|---------|-----------------|------------|
| Repository | доступ к данным | абстракция хранилища |
| Factory | создание объектов | инкапсуляция создания |
| Strategy | бизнес-логика | сменяемые алгоритмы |
| Observer/Pub-Sub | события | слабая связанность |
| <другие> | <...> | <...> |

---

## 5. Архитектурная схема и ключевые компоненты (выбранный состав)
> Это “каркас”: компоненты + технологии + статус. Детализация будет в архитектурном документе.

| Компонент | Технология/протокол (предварительно) | Статус (Обяз/Опц/Отложено) | Обоснование |
|---|---|---|---|
| API / Gateway | <...> | <...> | <...> |
| Auth / IAM | <...> | <...> | <...> |
| Основное хранилище | <...> | <...> | <...> |
| Очереди/события | <...> | <...> | <...> |
| Поиск (если нужен) | <...> | <...> | <...> |
| Файлы/артефакты | <...> | <...> | <...> |
| Наблюдаемость | <...> | <...> | <...> |
| CI/CD | <...> | <...> | <...> |
| UI/Клиенты | <...> | <...> | <...> |

---

## 6. Технологический стек и прикладной слой
### 6.1 Языки программирования и назначение
| Уровень системы | Основные технологии | Назначение/роль | Примечание |
|---|---|---|---|
| Backend / API | <...> | <...> | <...> |
| Интеграции | <...> | <...> | <...> |
| Data processing (если есть) | <...> | <...> | <...> |
| Frontend / UI | <...> | <...> | <...> |
| DevOps / IaC | <...> | <...> | <...> |

### 6.2 Хранилища и данные
| Назначение | Система | Обоснование | Альтернативы |
|---|---|---|---|
| Транзакционные данные | <...> | <...> | <...> |
| Кэш / очереди | <...> | <...> | <...> |
| Поиск | <...> | <...> | <...> |
| Объектное/файловое хранилище | <...> | <...> | <...> |

### 6.3 Интеграция и обмен данными
| Тип интеграции | Вариант | Где применяется | Почему выбран |
|---|---|---|---|
| Синхронная | REST/gRPC | <...> | <...> |
| Асинхронная | broker/events | <...> | <...> |
| Входящие вызовы | webhooks | <...> | <...> |
| Пакетная | ETL/Batch | <...> | <...> |

---

## 7. Функциональные возможности (в привязке к предметной области)
> Не переписываем предметную область, только фиксируем “что обязаны покрыть” как следствие выбора.

- <Функция/возможность 1 из предметной области>
- <Функция/возможность 2>
- <...>

---

## 8. Нефункциональные показатели (целевые ориентиры)
| Категория | Целевое значение | Как обеспечиваем (направление) |
|---|---|---|
| Надёжность | <...> | <...> |
| Производительность | <...> | <...> |
| Безопасность | <...> | <...> |
| Масштабируемость | <...> | <...> |
| Поддерживаемость | <...> | <...> |
| Наблюдаемость | <...> | <...> |

---

## 9. Критические требования эксплуатации
1. <backup/restore требования>
2. <RPO/RTO>
3. <security access (MFA/RBAC/audit)>
4. <retention/logging/архивирование>
5. <совместимость/миграции/обновления>

---

## 10. Риски и открытые вопросы
### 10.1 Риски
| Риск | Проявление | Вероятность (L/M/H) | Влияние (L/M/H) | Компенсация |
|---|---|---|---|---|
| <...> | <...> | <...> | <...> | <...> |

### 10.2 Открытые вопросы
| Вопрос | Почему важно | Как закрываем (PoC/интервью/расчёт) | Дедлайн | Владелец |
|---|---|---|---|---|
| <...> | <...> | <...> | <YYYY-MM-DD> | <...> |

---

## 11. Вывод (итог выбора)
Принято решение использовать: **<platform> + <architecture> + <integration> + <data layer> + <languages/stack>**.  
Выбор обусловлен требованиями предметной области, прежде всего: <3–6 буллетов причин>.  
Открытые вопросы: <1–3 пункта>.  
Следующий шаг: подготовка документов по архитектуре и стеку на основании выбранного направления.

---

## Приложение A. Протокол консультаций/источников (опционально)
| Дата | Источник/эксперт | Тема | Ключевой вывод |
|---|---|---|---|
| <...> | <...> | <...> | <...> |

## Приложение B. План PoC/проверок (опционально)
| Проверка | Цель | Метод | Критерий успеха | Срок |
|---|---|---|---|---|
| <...> | <...> | <...> | <...> | <...> |
